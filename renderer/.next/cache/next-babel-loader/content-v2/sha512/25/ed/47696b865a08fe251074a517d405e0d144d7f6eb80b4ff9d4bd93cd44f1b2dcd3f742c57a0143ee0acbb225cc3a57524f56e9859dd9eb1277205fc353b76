{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/global/Layout.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState } from 'react';\nimport '../../styles/layout.css';\nimport App from '../../pages/app';\nimport Category from \"../../pages/category\";\nimport News from \"../../pages/news\";\nimport User from \"../../pages/user\";\n\nvar Layout = /*#__PURE__*/function (_React$Component) {\n  _inherits(Layout, _React$Component);\n\n  var _super = _createSuper(Layout);\n\n  function Layout(props) {\n    var _this2;\n\n    _classCallCheck(this, Layout);\n\n    _this2 = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this2), \"handleChangePage\", function (page) {\n      _this2.setState({\n        page: page\n      });\n    });\n\n    _this2.state = {\n      page: '/app',\n      autoHeight: 0,\n      scroll: {\n        '/app': 0,\n        '/category': 0,\n        '/news': 0,\n        '/user': 0\n      },\n      menuList: [{\n        name: '首页',\n        href: '/app',\n        icon: 'icon-shouye'\n      }, {\n        name: '分区',\n        href: '/category',\n        icon: 'icon-category'\n      }, {\n        name: '动态',\n        href: '/news',\n        icon: 'icon-dongtai'\n      }, {\n        name: '我的',\n        href: '/user',\n        icon: 'icon-bilibili-line'\n      }]\n    };\n    return _this2;\n  }\n\n  _createClass(Layout, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState, nextContext) {\n      console.log(nextState);\n      return true;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var _this = this;\n      /* 自动设置全局导航和全局内容区块的高度和位置 */\n\n\n      this.setState({\n        autoHeight: window.innerHeight - 60\n      });\n      window.addEventListener('resize', function (e) {\n        _this.setState({\n          autoHeight: window.innerHeight - 60\n        });\n      });\n\n      switch (_this.state.page) {\n        case '/app':\n          _this.app.scrollTo(0, _this.state.scroll['/app']);\n\n          break;\n\n        case '/category':\n          _this.app.scrollTo(0, _this.state.scroll['/category']);\n\n          break;\n\n        case '/news':\n          _this.app.scrollTo(0, _this.state.scroll['/news']);\n\n          break;\n\n        case '/user':\n          _this.app.scrollTo(0, _this.state.scroll['/user']);\n\n      }\n\n      this.app.addEventListener('scroll', function () {\n        console.log(_this.app.scrollTop);\n        var newState = JSON.parse(JSON.stringify(_this3.state.scroll));\n\n        switch (_this.state.page) {\n          case '/app':\n            newState['/app'] = _this.app.scrollTop;\n            break;\n\n          case '/category':\n            newState['/category'] = _this.app.scrollTop;\n            break;\n\n          case '/news':\n            newState['/news'] = _this.app.scrollTop;\n            break;\n\n          case '/user':\n            newState['/user'] = _this.app.scrollTop;\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          id: \"layout-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            id: \"layout-content-container\",\n            ref: function ref(app) {\n              return _this4.app = app;\n            },\n            className: _JSXStyle.dynamic([[\"4184239453\", [this.state.autoHeight]]]),\n            children: [/*#__PURE__*/_jsxDEV(App, {\n              display: this.state.page === '/app' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Category, {\n              display: this.state.page === '/category' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(News, {\n              display: this.state.page === '/news' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(User, {\n              display: this.state.page === '/user' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n              id: \"4184239453\",\n              dynamic: [this.state.autoHeight],\n              children: \"#layout-content-container.__jsx-style-dynamic-selector{width:100%;height:\".concat(this.state.autoHeight, \"px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2dsb2JhbC9MYXlvdXQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlINkIsQUFHNEMsV0FDMkIsc0NBQ3hDIiwiZmlsZSI6Ii9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2dsb2JhbC9MYXlvdXQuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuLi8uLi9zdHlsZXMvbGF5b3V0LmNzcyc7XG5pbXBvcnQgQXBwIGZyb20gJy4uLy4uL3BhZ2VzL2FwcCc7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSBcIi4uLy4uL3BhZ2VzL2NhdGVnb3J5XCI7XG5pbXBvcnQgTmV3cyBmcm9tIFwiLi4vLi4vcGFnZXMvbmV3c1wiO1xuaW1wb3J0IFVzZXIgZnJvbSBcIi4uLy4uL3BhZ2VzL3VzZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGF5b3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcGFnZTogJy9hcHAnLFxuICAgICAgICAgICAgYXV0b0hlaWdodDogMCxcbiAgICAgICAgICAgIHNjcm9sbDoge1xuICAgICAgICAgICAgICAgICcvYXBwJzogMCxcbiAgICAgICAgICAgICAgICAnL2NhdGVnb3J5JzogMCxcbiAgICAgICAgICAgICAgICAnL25ld3MnOiAwLFxuICAgICAgICAgICAgICAgICcvdXNlcic6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZW51TGlzdDogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+mmlumhtScsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6ICcvYXBwJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ljb24tc2hvdXllJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5YiG5Yy6JyxcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogJy9jYXRlZ29yeScsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdpY29uLWNhdGVnb3J5J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5Yqo5oCBJyxcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogJy9uZXdzJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ljb24tZG9uZ3RhaSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+aIkeeahCcsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6ICcvdXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdpY29uLWJpbGliaWxpLWxpbmUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCkge1xuICAgICAgICBjb25zb2xlLmxvZyhuZXh0U3RhdGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8qIOiHquWKqOiuvue9ruWFqOWxgOWvvOiIquWSjOWFqOWxgOWGheWuueWMuuWdl+eahOmrmOW6puWSjOS9jee9riAqL1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGF1dG9IZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDYwXG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKGUpID0+IHtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA2MFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3dpdGNoKF90aGlzLnN0YXRlLnBhZ2Upe1xuICAgICAgICAgICAgY2FzZSAnL2FwcCc6XG4gICAgICAgICAgICAgICAgX3RoaXMuYXBwLnNjcm9sbFRvKDAsIF90aGlzLnN0YXRlLnNjcm9sbFsnL2FwcCddKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJy9jYXRlZ29yeSc6XG4gICAgICAgICAgICAgICAgX3RoaXMuYXBwLnNjcm9sbFRvKDAsIF90aGlzLnN0YXRlLnNjcm9sbFsnL2NhdGVnb3J5J10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnL25ld3MnOlxuICAgICAgICAgICAgICAgIF90aGlzLmFwcC5zY3JvbGxUbygwLCBfdGhpcy5zdGF0ZS5zY3JvbGxbJy9uZXdzJ10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnL3VzZXInOlxuICAgICAgICAgICAgICAgIF90aGlzLmFwcC5zY3JvbGxUbygwLCBfdGhpcy5zdGF0ZS5zY3JvbGxbJy91c2VyJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hcHAuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuYXBwLnNjcm9sbFRvcClcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnNjcm9sbCkpO1xuICAgICAgICAgICAgc3dpdGNoKF90aGlzLnN0YXRlLnBhZ2Upe1xuICAgICAgICAgICAgICAgIGNhc2UgJy9hcHAnOlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZVsnL2FwcCddID0gX3RoaXMuYXBwLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnL2NhdGVnb3J5JzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGVbJy9jYXRlZ29yeSddID0gX3RoaXMuYXBwLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnL25ld3MnOlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZVsnL25ld3MnXSA9IF90aGlzLmFwcC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJy91c2VyJzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGVbJy91c2VyJ10gPSBfdGhpcy5hcHAuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2VQYWdlID0gKHBhZ2UpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwYWdlXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwibGF5b3V0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBpZD1cImxheW91dC1jb250ZW50LWNvbnRhaW5lclwiIHJlZj17YXBwID0+IHRoaXMuYXBwID0gYXBwfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBcHAgZGlzcGxheT17dGhpcy5zdGF0ZS5wYWdlID09PSAnL2FwcCcgPyAgdHJ1ZTogZmFsc2V9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2F0ZWdvcnkgZGlzcGxheT17dGhpcy5zdGF0ZS5wYWdlID09PSAnL2NhdGVnb3J5JyA/ICB0cnVlOiBmYWxzZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxOZXdzIGRpc3BsYXk9e3RoaXMuc3RhdGUucGFnZSA9PT0gJy9uZXdzJyA/ICB0cnVlOiBmYWxzZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VyIGRpc3BsYXk9e3RoaXMuc3RhdGUucGFnZSA9PT0gJy91c2VyJyA/ICB0cnVlOiBmYWxzZX0gLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI2xheW91dC1jb250ZW50LWNvbnRhaW5lcntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJHt0aGlzLnN0YXRlLmF1dG9IZWlnaHR9cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgICAgICAgICAgICAgICA8Zm9vdGVyIGlkPVwibGF5b3V0LW5hdmlnYXRpb24tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZW51TGlzdC5tYXAoKG1lbnUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQtbmF2aWdhdGlvbi1pdGVtIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7KG1lbnUuaHJlZi5pbmNsdWRlcyh0aGlzLnN0YXRlLnBhZ2UpID8gJ2FjdGl2ZSc6ICcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e21lbnUuaHJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuaGFuZGxlQ2hhbmdlUGFnZShtZW51LmhyZWYpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9e2BpY29uZm9udCAke21lbnUuaWNvbn0gbGF5b3V0LW5hdmlnYXRpb24taWNvbmB9PjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPnttZW51Lm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgPC8+XG4gICAgICAgIClcbiAgICB9XG59Il19 */\\n/*@ sourceURL=/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/global/Layout.jsx */\")\n            }, void 0, false, void 0, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            id: \"layout-navigation-container\",\n            children: this.state.menuList.map(function (menu, index) {\n              return /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"\\n                                        layout-navigation-item \\n                                        \".concat(menu.href.includes(_this4.state.page) ? 'active' : '', \"\\n                                    \"),\n                onClick: function onClick() {\n                  return _this4.handleChangePage(menu.href);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"iconfont \".concat(menu.icon, \" layout-navigation-icon\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 37\n                }, _this4), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: menu.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 37\n                }, _this4)]\n              }, menu.href, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 33\n              }, _this4);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this)\n      }, void 0, false);\n    }\n  }]);\n\n  return Layout;\n}(React.Component);\n\nexport { Layout as default };","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/global/Layout.jsx"],"names":["React","useState","App","Category","News","User","Layout","props","page","setState","state","autoHeight","scroll","menuList","name","href","icon","nextProps","nextState","nextContext","console","log","_this","window","innerHeight","addEventListener","e","app","scrollTo","scrollTop","newState","JSON","parse","stringify","map","menu","index","includes","handleChangePage","Component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport '../../styles/layout.css';\nimport App from '../../pages/app';\nimport Category from \"../../pages/category\";\nimport News from \"../../pages/news\";\nimport User from \"../../pages/user\";\n\nexport default class Layout extends React.Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            page: '/app',\n            autoHeight: 0,\n            scroll: {\n                '/app': 0,\n                '/category': 0,\n                '/news': 0,\n                '/user': 0\n            },\n            menuList: [\n                {\n                    name: '首页',\n                    href: '/app',\n                    icon: 'icon-shouye'\n                },\n                {\n                    name: '分区',\n                    href: '/category',\n                    icon: 'icon-category'\n                },\n                {\n                    name: '动态',\n                    href: '/news',\n                    icon: 'icon-dongtai'\n                },\n                {\n                    name: '我的',\n                    href: '/user',\n                    icon: 'icon-bilibili-line'\n                }\n            ]\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        console.log(nextState);\n        return true;\n    }\n\n    componentDidMount() {\n        const _this = this;\n\n        /* 自动设置全局导航和全局内容区块的高度和位置 */\n        this.setState({\n            autoHeight: window.innerHeight - 60\n        });\n        window.addEventListener('resize', (e) => {\n            _this.setState({\n                autoHeight: window.innerHeight - 60\n            })\n        });\n\n        switch(_this.state.page){\n            case '/app':\n                _this.app.scrollTo(0, _this.state.scroll['/app']);\n                break;\n            case '/category':\n                _this.app.scrollTo(0, _this.state.scroll['/category']);\n                break;\n            case '/news':\n                _this.app.scrollTo(0, _this.state.scroll['/news']);\n                break;\n            case '/user':\n                _this.app.scrollTo(0, _this.state.scroll['/user']);\n        }\n\n        this.app.addEventListener('scroll', () => {\n            console.log(_this.app.scrollTop)\n            const newState = JSON.parse(JSON.stringify(this.state.scroll));\n            switch(_this.state.page){\n                case '/app':\n                    newState['/app'] = _this.app.scrollTop;\n                    break;\n                case '/category':\n                    newState['/category'] = _this.app.scrollTop;\n                    break;\n                case '/news':\n                    newState['/news'] = _this.app.scrollTop;\n                    break;\n                case '/user':\n                    newState['/user'] = _this.app.scrollTop;\n            }\n        });\n    }\n\n    handleChangePage = (page) => {\n        this.setState({\n            page\n        })\n    }\n\n    render() {\n        return(\n            <>\n                <section id=\"layout-container\">\n                    <section id=\"layout-content-container\" ref={app => this.app = app}>\n                        <App display={this.state.page === '/app' ?  true: false} />\n                        <Category display={this.state.page === '/category' ?  true: false} />\n                        <News display={this.state.page === '/news' ?  true: false} />\n                        <User display={this.state.page === '/user' ?  true: false} />\n\n                        <style jsx>\n                            {`\n                              #layout-content-container{\n                                width: 100%;\n                                height: ${this.state.autoHeight}px;\n                              }\n                            `}\n                        </style>\n                    </section>\n\n                    <footer id=\"layout-navigation-container\">\n                        {\n                            this.state.menuList.map((menu, index) => (\n                                <a\n                                    className={`\n                                        layout-navigation-item \n                                        ${(menu.href.includes(this.state.page) ? 'active': '')}\n                                    `}\n                                    key={menu.href}\n                                    onClick={() => this.handleChangePage(menu.href)}\n                                >\n                                    <i className={`iconfont ${menu.icon} layout-navigation-icon`}></i>\n                                    <span>{menu.name}</span>\n                                </a>\n                            ))\n                        }\n                    </footer>\n                </section>\n            </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}