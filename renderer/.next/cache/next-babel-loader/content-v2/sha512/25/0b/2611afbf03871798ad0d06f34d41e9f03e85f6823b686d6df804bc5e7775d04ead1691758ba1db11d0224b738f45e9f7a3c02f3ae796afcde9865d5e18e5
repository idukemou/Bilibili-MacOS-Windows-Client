{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useRef, useState } from \"react\";\nimport store from \"../../redux/store\";\nimport { platVideoStatusAction, playVideoInfoAction } from \"../../redux/actionCreators\";\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\nfunction Video(props) {\n  var flvPlayer = null;\n\n  var _useState = useState(store.getState().videoInfo.url),\n      url = _useState[0],\n      setUrl = _useState[1];\n\n  var videoUrl = 'https://upos-hz-mirrorakam.akamaized.net/upgcxcode/95/54/297805495/297805495-1-32.flv?e=ig8euxZM2rNcNbRj7zUVhoM17buBhwdEto8g5X10ugNcXBlqNxHxNEVE5XREto8KqJZHUa6m5J0SqE85tZvEuENvNo8g2ENvNo8i8o859r1qXg8xNEVE5XREto8GuFGv2U7SuxI72X6fTr859r1qXg8gNEVE5XREto8z5JZC2X2gkX5L5F1eTX1jkXlsTXHeux_f2o859IB_&uipk=5&nbs=1&deadline=1619409834&gen=playurlv2&os=akam&oi=2906822554&trid=4c49f3bfa44f482fa4088ce35f8dc88cu&platform=pc&upsig=ee4a0643df0275a65c505b28ae63a29d&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,platform&hdnts=exp=1619409834~hmac=947b3a497a1a870d01641c53b44c62689bf45889a78a680d15919365508eb0b2&mid=0&orderid=0,1&agrr=1&logo=80000000';\n  useEffect(function () {\n    store.subscribe(function () {\n      if (JSON.stringify(store.getState().videoInfo.url) !== '{}') {\n        var temp = store.getState().videoInfo.url.durl[0].url;\n        setUrl(temp);\n      }\n    });\n  }, [store.getState().videoInfo.url]);\n  useEffect(function () {\n    if (flvjs.isSupported()) {\n      player_load(url);\n    }\n  });\n  useEffect(function () {\n    if (!status) {\n      player_destroy();\n    }\n  }, [props.status]);\n\n  function player_load(url) {\n    if (flvPlayer !== null || flvPlayer !== undefined) {\n      player_destroy();\n    }\n\n    flvPlayer = flvjs.createPlayer({\n      type: 'flv',\n      hasVideo: true,\n      hasAudio: true,\n      url: url\n    });\n    flvPlayer.attachMediaElement(document.getElementById('playerContainer'));\n    flvPlayer.load();\n  }\n\n  function player_start() {\n    if (flvPlayer !== null) {\n      flvPlayer.play();\n    }\n  }\n\n  function player_pause() {\n    if (flvPlayer !== null) {\n      flvPlayer.pause();\n    }\n  }\n\n  function player_destroy() {\n    if (flvPlayer !== null) {\n      flvPlayer.pause();\n      flvPlayer.unload();\n      flvPlayer.detachMediaElement();\n      flvPlayer.destroy();\n      flvPlayer = null;\n    }\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: 640,\n      height: 480,\n      border: '1px solid #000'\n    },\n    children: [/*#__PURE__*/_jsx(\"video\", {\n      id: \"playerContainer\",\n      width: \"640px\",\n      height: \"480px\",\n      controls: true\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return player_start();\n      },\n      children: \"play\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return player_pause();\n      },\n      children: \"pause\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return player_destroy();\n      },\n      children: \"destroy\"\n    })]\n  });\n}\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\n\nexport default function VideoDetail(props) {\n  var _useState2 = useState(store.getState().playVideoStatus),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  useEffect(function () {\n    store.subscribe(function () {\n      setStatus(store.getState().playVideoStatus);\n    });\n  }, [store.getState().playVideoStatus]);\n\n  function exitVideo() {\n    store.dispatch(platVideoStatusAction(false));\n    store.dispatch(playVideoInfoAction({\n      url: {},\n      info: {}\n    }));\n  }\n\n  return /*#__PURE__*/_jsxs(\"section\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: '10000',\n      backgroundColor: 'lightpink',\n      display: status ? 'block' : 'none'\n    },\n    children: [status ? /*#__PURE__*/_jsx(Video, {\n      status: status\n    }) : '', /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"button\", {\n      onClick: function onClick() {\n        return exitVideo();\n      },\n      children: \"cancel\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}