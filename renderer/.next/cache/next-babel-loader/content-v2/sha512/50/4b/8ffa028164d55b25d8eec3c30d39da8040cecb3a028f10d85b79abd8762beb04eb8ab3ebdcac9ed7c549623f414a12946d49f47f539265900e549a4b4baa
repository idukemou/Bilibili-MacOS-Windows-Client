{"ast":null,"code":"import \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/searchPage/search.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport Header from \"../layout/header\";\nimport '../../styles/search.css';\nimport electron from \"electron\";\nvar ipcRenderer = electron.ipcRenderer || false;\nexport default function Search(props) {\n  _s();\n\n  var _this = this;\n\n  var searchRef = useRef(null);\n\n  var _useState = useState([]),\n      hotWords = _useState[0],\n      setHotWords = _useState[1];\n\n  var _useState2 = useState([]),\n      searchHistory = _useState2[0],\n      setSearchHistory = _useState2[1];\n\n  var _useState3 = useState(false),\n      showSuggestWords = _useState3[0],\n      setShowSuggestWords = _useState3[1];\n\n  var _useState4 = useState([]),\n      suggestWords = _useState4[0],\n      setSuggestWords = _useState4[1];\n\n  useEffect(function () {\n    if (ipcRenderer) {\n      ipcRenderer.invoke(\"get_search_hot_words\").then(function (res) {\n        setHotWords(res.list);\n      });\n    }\n  }, [props.pageStatus]);\n  useEffect(function () {\n    if (ipcRenderer) {\n      ipcRenderer.invoke(\"get_search_suggest_words\").then(function (res) {});\n    }\n  }, [showSuggestWords]);\n\n  function searchRequest() {\n    searchRef.current.blur();\n  }\n\n  function handleWordChange(_ref) {\n    var value = _ref.target.value;\n\n    if (value.length === 0) {\n      setShowSuggestWords(false);\n      return;\n    }\n\n    setShowSuggestWords(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"search-page-container \".concat(props.pageStatus ? '' : 'search-page-hide'),\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      center: /*#__PURE__*/_jsxDEV(_Input, {\n        id: \"search-bar\",\n        placeholder: \"\\u641C\\u7D22\\u89C6\\u9891\\u3001\\u756A\\u5267\\u6216up\\u4E3B\",\n        prefix: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"iconfont icon-search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 33\n        }, this),\n        onPressEnter: function onPressEnter() {\n          return searchRequest();\n        },\n        onChange: function onChange(e) {\n          return handleWordChange(e);\n        },\n        ref: searchRef,\n        allowClear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this),\n      right: /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"link\",\n        className: \"search-cancel-button\",\n        onClick: function onClick() {\n          return props.setPageStatus(false);\n        },\n        children: \"\\u53D6\\u6D88\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-page-default-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-page-hot-search-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-options-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u5927\\u5BB6\\u90FD\\u5728\\u641C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-content\",\n          children: hotWords.map(function (word, index) {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"search-page-hot-word-item\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: word.keyword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 37\n              }, _this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 33\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-page-search-history\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-options-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u641C\\u7D22\\u5386\\u53F2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-page-suggest-words\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Search, \"Cug05h9g2xCE33LVGZXrdm9lp88=\");\n\n_c = Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/searchPage/search.jsx"],"names":["useEffect","useRef","useState","Header","electron","ipcRenderer","Search","props","searchRef","hotWords","setHotWords","searchHistory","setSearchHistory","showSuggestWords","setShowSuggestWords","suggestWords","setSuggestWords","invoke","then","res","list","pageStatus","searchRequest","current","blur","handleWordChange","value","target","length","e","setPageStatus","map","word","index","keyword"],"mappings":"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","sourcesContent":["import {useEffect, useRef, useState} from \"react\";\nimport Header from \"../layout/header\";\nimport {Button, Input} from \"antd\";\nimport '../../styles/search.css';\nimport electron from \"electron\";\n\nconst ipcRenderer = electron.ipcRenderer || false;\n\nexport default function Search(props){\n\n    const searchRef = useRef(null);\n\n    const [hotWords, setHotWords] = useState([]);\n    const [searchHistory, setSearchHistory] = useState([]);\n\n    const [showSuggestWords, setShowSuggestWords] = useState(false);\n    const [suggestWords, setSuggestWords] = useState([]);\n\n\n    useEffect(() => {\n        if(ipcRenderer){\n            ipcRenderer.invoke(\"get_search_hot_words\")\n                .then((res) => {\n                   setHotWords(res.list);\n                });\n        }\n    }, [props.pageStatus]);\n\n    useEffect(() => {\n        if(ipcRenderer){\n            ipcRenderer.invoke(\"get_search_suggest_words\")\n                .then((res) => {\n\n                })\n        }\n    }, [showSuggestWords]);\n\n    function searchRequest(){\n        searchRef.current.blur();\n    }\n\n    function handleWordChange({target: {value}}){\n        if(value.length === 0){\n            setShowSuggestWords(false);\n            return;\n        }\n\n        setShowSuggestWords(true);\n    }\n\n    return(\n        <section className={`search-page-container ${props.pageStatus ? '': 'search-page-hide'}`}>\n            <Header\n                center={\n                    <Input\n                        id='search-bar'\n                        placeholder=\"搜索视频、番剧或up主\"\n                        prefix={<i className='iconfont icon-search'/>}\n                        onPressEnter={() => searchRequest()}\n                        onChange={(e) => handleWordChange(e)}\n                        ref={searchRef}\n                        allowClear\n                    />\n                }\n\n                right={\n                    <Button\n                        type='link'\n                        className=\"search-cancel-button\"\n                        onClick={() => props.setPageStatus(false)}\n                    >\n                        取消\n                    </Button>\n                }\n            />\n\n            <section className=\"search-page-default-options\">\n                <div className=\"search-page-hot-search-wrapper\">\n                    <div className=\"search-page-default-options-header\">\n                        <span>大家都在搜</span>\n                    </div>\n\n                    <div className=\"search-page-default-content\">\n                        {\n                            hotWords.map((word, index) => (\n                                <button key={index} className=\"search-page-hot-word-item\">\n                                    <span>{word.keyword}</span>\n                                </button>\n                            ))\n                        }\n                    </div>\n                </div>\n\n                <div className=\"search-page-search-history\">\n                    <div className=\"search-page-default-options-header\">\n                        <span>搜索历史</span>\n                    </div>\n\n                    <div className=\"search-page-default-content\">\n\n                    </div>\n                </div>\n            </section>\n\n            <section className=\"search-page-suggest-words\">\n\n            </section>\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}