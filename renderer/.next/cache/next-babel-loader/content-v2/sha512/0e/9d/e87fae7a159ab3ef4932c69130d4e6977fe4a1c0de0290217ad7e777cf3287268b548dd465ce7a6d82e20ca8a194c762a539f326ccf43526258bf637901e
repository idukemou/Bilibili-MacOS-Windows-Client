{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useEffect, useRef, useState } from \"react\";\nimport store from \"../../redux/store\";\nimport { platVideoStatusAction, playVideoInfoAction } from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport { convertTime } from \"../../utils/utils\";\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\nfunction Video(props) {\n  console.log(\"新开的\");\n  let flvPlayer = null;\n  const {\n    0: url,\n    1: setUrl\n  } = useState(store.getState().videoInfo.url);\n  const {\n    0: currentTime,\n    1: setCurrentTime\n  } = useState(0);\n  useEffect(() => {\n    store.subscribe(() => {\n      if (JSON.stringify(store.getState().videoInfo.url) !== '{}') {\n        const temp = store.getState().videoInfo.url.durl[0].url;\n        setUrl(temp);\n      }\n    });\n  }, [store.getState().videoInfo.url]);\n  useEffect(() => {\n    if (flvjs.isSupported()) {\n      player_load(url);\n    }\n  });\n  useEffect(() => {\n    if (!status) {\n      player_destroy();\n    }\n  }, [props.status]);\n  useEffect(() => {\n    if (flvPlayer !== null) {\n      setCurrentTime(flvPlayer.getCurrentTime());\n      console.log(currentTime);\n    }\n  }, [currentTime]);\n\n  function player_load(url) {\n    flvPlayer = new Player({\n      url: url\n    }, \"playerContainer\");\n  }\n\n  function player_start() {\n    flvPlayer.play();\n  }\n\n  function player_pause() {\n    flvPlayer.pause();\n  }\n\n  function player_destroy() {\n    if (flvPlayer !== null) {\n      flvPlayer.destroy();\n    }\n  }\n\n  function player_specificTime() {\n    if (flvPlayer !== null) {\n      flvPlayer.setCurrentTime(10);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: 640,\n      height: 480,\n      border: '1px solid #000'\n    },\n    className: \"jsx-2196272468\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      id: \"playerContainer\",\n      width: \"640px\",\n      height: \"480px\",\n      controls: true,\n      className: \"jsx-2196272468\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => player_start(),\n      className: \"jsx-2196272468\",\n      children: \"play\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => player_pause(),\n      className: \"jsx-2196272468\",\n      children: \"pause\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => player_destroy(),\n      className: \"jsx-2196272468\",\n      children: \"destroy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => player_specificTime(),\n      className: \"jsx-2196272468\",\n      children: \"\\u52A010\\u79D2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.muteSwitch(),\n      className: \"jsx-2196272468\",\n      children: \"\\u9759\\u97F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        console.log(flvPlayer.getDuration());\n      },\n      className: \"jsx-2196272468\",\n      children: \"\\u83B7\\u53D6\\u64AD\\u653E\\u957F\\u5EA6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.setPlaySpeed(2),\n      className: \"jsx-2196272468\",\n      children: \"2x\\u901F\\u5EA6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.replayVideo(),\n      className: \"jsx-2196272468\",\n      children: \"\\u91CD\\u65B0\\u64AD\\u653E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {\n      className: \"jsx-2196272468\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 74\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {\n      className: \"jsx-2196272468\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 79\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-2196272468\" + \" \" + \"progress-bar-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"range\",\n        min: \"0\",\n        max: \"100\",\n        className: \"jsx-2196272468\" + \" \" + \"progress-bar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"2196272468\",\n      children: \".progress-bar-wrapper.jsx-2196272468{-webkit-appearance:none;width:500px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2NvbW1vbi92aWRlb0RldGFpbC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEZ3QixBQUcyQyx3QkFDWixZQUNkIiwiZmlsZSI6Ii9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2NvbW1vbi92aWRlb0RldGFpbC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgc3RvcmUgZnJvbSBcIi4uLy4uL3JlZHV4L3N0b3JlXCI7XG5pbXBvcnQge3BsYXRWaWRlb1N0YXR1c0FjdGlvbiwgcGxheVZpZGVvSW5mb0FjdGlvbn0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvbkNyZWF0b3JzXCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuLi8uLi91dGlscy9QbGF5ZXJcIjtcbmltcG9ydCB7Y29udmVydFRpbWV9IGZyb20gXCIuLi8uLi91dGlscy91dGlsc1wiO1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBWaWRlbyhwcm9wcyl7XG5cbiAgICBjb25zb2xlLmxvZyhcIuaWsOW8gOeahFwiKTtcblxuICAgIGxldCBmbHZQbGF5ZXIgPSBudWxsO1xuICAgIGNvbnN0IFt1cmwsIHNldFVybF0gPSB1c2VTdGF0ZShzdG9yZS5nZXRTdGF0ZSgpLnZpZGVvSW5mby51cmwpO1xuICAgIGNvbnN0IFtjdXJyZW50VGltZSwgc2V0Q3VycmVudFRpbWVdID0gdXNlU3RhdGUoMCk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoSlNPTi5zdHJpbmdpZnkoc3RvcmUuZ2V0U3RhdGUoKS52aWRlb0luZm8udXJsKSAhPT0gJ3t9Jyl7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHN0b3JlLmdldFN0YXRlKCkudmlkZW9JbmZvLnVybC5kdXJsWzBdLnVybDtcbiAgICAgICAgICAgICAgICBzZXRVcmwodGVtcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSwgW3N0b3JlLmdldFN0YXRlKCkudmlkZW9JbmZvLnVybF0pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYoZmx2anMuaXNTdXBwb3J0ZWQoKSl7XG4gICAgICAgICAgICBwbGF5ZXJfbG9hZCh1cmwpO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmKCFzdGF0dXMpe1xuICAgICAgICAgICAgcGxheWVyX2Rlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0sIFtwcm9wcy5zdGF0dXNdKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYoZmx2UGxheWVyICE9PSBudWxsKXtcbiAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lKGZsdlBsYXllci5nZXRDdXJyZW50VGltZSgpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuICAgIH0sIFtjdXJyZW50VGltZV0pXG5cblxuXG4gICAgZnVuY3Rpb24gcGxheWVyX2xvYWQodXJsKXtcbiAgICAgICAgZmx2UGxheWVyID0gbmV3IFBsYXllcih7dXJsOiB1cmx9LCBcInBsYXllckNvbnRhaW5lclwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJfc3RhcnQoKXtcbiAgICAgICAgZmx2UGxheWVyLnBsYXkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJfcGF1c2UoKXtcbiAgICAgICAgZmx2UGxheWVyLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxheWVyX2Rlc3Ryb3koKXtcbiAgICAgICAgaWYoZmx2UGxheWVyICE9PSBudWxsKXtcbiAgICAgICAgICAgIGZsdlBsYXllci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJfc3BlY2lmaWNUaW1lKCl7XG4gICAgICAgIGlmKGZsdlBsYXllciAhPT0gbnVsbCl7XG4gICAgICAgICAgICBmbHZQbGF5ZXIuc2V0Q3VycmVudFRpbWUoMTApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7d2lkdGg6NjQwLCBoZWlnaHQ6NDgwLCBib3JkZXI6ICcxcHggc29saWQgIzAwMCd9fT5cbiAgICAgICAgICAgIDx2aWRlbyBpZD0ncGxheWVyQ29udGFpbmVyJyB3aWR0aD0nNjQwcHgnIGhlaWdodD0nNDgwcHgnIGNvbnRyb2xzPXt0cnVlfSAvPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBwbGF5ZXJfc3RhcnQoKX0+cGxheTwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBwbGF5ZXJfcGF1c2UoKX0+cGF1c2U8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcGxheWVyX2Rlc3Ryb3koKX0+ZGVzdHJveTwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBwbGF5ZXJfc3BlY2lmaWNUaW1lKCl9PuWKoDEw56eSPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGZsdlBsYXllci5tdXRlU3dpdGNoKCl9PumdmemfszwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7Y29uc29sZS5sb2coZmx2UGxheWVyLmdldER1cmF0aW9uKCkpfX0+6I635Y+W5pKt5pS+6ZW/5bqmPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGZsdlBsYXllci5zZXRQbGF5U3BlZWQoMil9PjJ46YCf5bqmPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGZsdlBsYXllci5yZXBsYXlWaWRlbygpfT7ph43mlrDmkq3mlL48L2J1dHRvbj48YnIvPjxici8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZ3Jlc3MtYmFyLXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD1cIjEwMFwiIGNsYXNzTmFtZT1cInByb2dyZXNzLWJhclwiLz5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLnByb2dyZXNzLWJhci13cmFwcGVye1xuICAgICAgICAgICAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgICAgICAgICAgICAgd2lkdGg6IDUwMHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnMge0pTWC5FbGVtZW50fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZpZGVvRGV0YWlsKHByb3BzKXtcblxuICAgIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZShzdG9yZS5nZXRTdGF0ZSgpLnBsYXlWaWRlb1N0YXR1cyk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgc2V0U3RhdHVzKHN0b3JlLmdldFN0YXRlKCkucGxheVZpZGVvU3RhdHVzKTtcbiAgICAgICAgfSlcbiAgICB9LCBbc3RvcmUuZ2V0U3RhdGUoKS5wbGF5VmlkZW9TdGF0dXNdKTtcblxuXG4gICAgZnVuY3Rpb24gZXhpdFZpZGVvKCl7XG4gICAgICAgIHN0b3JlLmRpc3BhdGNoKHBsYXRWaWRlb1N0YXR1c0FjdGlvbihmYWxzZSkpO1xuICAgICAgICBzdG9yZS5kaXNwYXRjaChwbGF5VmlkZW9JbmZvQWN0aW9uKHtcbiAgICAgICAgICAgIHVybDoge30sXG4gICAgICAgICAgICBpbmZvOiB7fVxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuKFxuICAgICAgICA8c2VjdGlvbiBzdHlsZT17e1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICB6SW5kZXg6ICcxMDAwMCcsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdsaWdodHBpbmsnLFxuICAgICAgICAgICAgZGlzcGxheTogKHN0YXR1cyA/ICdibG9jayc6ICdub25lJylcbiAgICAgICAgfX0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdHVzICYmIDxWaWRlbyBzdGF0dXM9e3N0YXR1c30gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDxici8+PGJyLz48YnIvPjxici8+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGV4aXRWaWRlbygpfT5jYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgIClcbn0iXX0= */\\n/*@ sourceURL=/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\n\nexport default function VideoDetail(props) {\n  const {\n    0: status,\n    1: setStatus\n  } = useState(store.getState().playVideoStatus);\n  useEffect(() => {\n    store.subscribe(() => {\n      setStatus(store.getState().playVideoStatus);\n    });\n  }, [store.getState().playVideoStatus]);\n\n  function exitVideo() {\n    store.dispatch(platVideoStatusAction(false));\n    store.dispatch(playVideoInfoAction({\n      url: {},\n      info: {}\n    }));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: '10000',\n      backgroundColor: 'lightpink',\n      display: status ? 'block' : 'none'\n    },\n    children: [status && /*#__PURE__*/_jsxDEV(Video, {\n      status: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => exitVideo(),\n      children: \"cancel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx"],"names":["useEffect","useRef","useState","store","platVideoStatusAction","playVideoInfoAction","Player","convertTime","Video","props","console","log","flvPlayer","url","setUrl","getState","videoInfo","currentTime","setCurrentTime","subscribe","JSON","stringify","temp","durl","flvjs","isSupported","player_load","status","player_destroy","getCurrentTime","player_start","play","player_pause","pause","destroy","player_specificTime","width","height","border","muteSwitch","getDuration","setPlaySpeed","replayVideo","VideoDetail","setStatus","playVideoStatus","exitVideo","dispatch","info","position","top","left","right","bottom","zIndex","backgroundColor","display"],"mappings":"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","sourcesContent":["import {useEffect, useRef, useState} from \"react\";\nimport store from \"../../redux/store\";\nimport {platVideoStatusAction, playVideoInfoAction} from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport {convertTime} from \"../../utils/utils\";\n\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\nfunction Video(props){\n\n    console.log(\"新开的\");\n\n    let flvPlayer = null;\n    const [url, setUrl] = useState(store.getState().videoInfo.url);\n    const [currentTime, setCurrentTime] = useState(0);\n\n    useEffect(() => {\n        store.subscribe(() => {\n            if(JSON.stringify(store.getState().videoInfo.url) !== '{}'){\n                const temp = store.getState().videoInfo.url.durl[0].url;\n                setUrl(temp);\n            }\n        })\n    }, [store.getState().videoInfo.url]);\n\n    useEffect(() => {\n        if(flvjs.isSupported()){\n            player_load(url);\n        }\n    })\n\n    useEffect(() => {\n        if(!status){\n            player_destroy();\n        }\n    }, [props.status])\n\n    useEffect(() => {\n        if(flvPlayer !== null){\n            setCurrentTime(flvPlayer.getCurrentTime());\n            console.log(currentTime);\n        }\n    }, [currentTime])\n\n\n\n    function player_load(url){\n        flvPlayer = new Player({url: url}, \"playerContainer\");\n    }\n\n    function player_start(){\n        flvPlayer.play();\n    }\n\n    function player_pause(){\n        flvPlayer.pause();\n    }\n\n    function player_destroy(){\n        if(flvPlayer !== null){\n            flvPlayer.destroy();\n        }\n    }\n\n    function player_specificTime(){\n        if(flvPlayer !== null){\n            flvPlayer.setCurrentTime(10);\n        }\n    }\n\n    return(\n        <div style={{width:640, height:480, border: '1px solid #000'}}>\n            <video id='playerContainer' width='640px' height='480px' controls={true} />\n            <button onClick={() => player_start()}>play</button>\n            <button onClick={() => player_pause()}>pause</button>\n            <button onClick={() => player_destroy()}>destroy</button>\n            <button onClick={() => player_specificTime()}>加10秒</button>\n            <button onClick={() => flvPlayer.muteSwitch()}>静音</button>\n            <button onClick={() => {console.log(flvPlayer.getDuration())}}>获取播放长度</button>\n            <button onClick={() => flvPlayer.setPlaySpeed(2)}>2x速度</button>\n            <button onClick={() => flvPlayer.replayVideo()}>重新播放</button><br/><br/>\n\n            <div className=\"progress-bar-wrapper\">\n                <input type=\"range\" min=\"0\" max=\"100\" className=\"progress-bar\"/>\n            </div>\n\n            <style jsx>{`\n                .progress-bar-wrapper{\n                  -webkit-appearance: none;\n                  width: 500px;\n                }\n            `}</style>\n        </div>\n    )\n}\n\n\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\nexport default function VideoDetail(props){\n\n    const [status, setStatus] = useState(store.getState().playVideoStatus);\n\n    useEffect(() => {\n        store.subscribe(() => {\n            setStatus(store.getState().playVideoStatus);\n        })\n    }, [store.getState().playVideoStatus]);\n\n\n    function exitVideo(){\n        store.dispatch(platVideoStatusAction(false));\n        store.dispatch(playVideoInfoAction({\n            url: {},\n            info: {}\n        }));\n    }\n\n    return(\n        <section style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: '10000',\n            backgroundColor: 'lightpink',\n            display: (status ? 'block': 'none')\n        }}>\n            {\n                status && <Video status={status} />\n            }\n            <br/><br/><br/><br/>\n            <button onClick={() => exitVideo()}>cancel</button>\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}