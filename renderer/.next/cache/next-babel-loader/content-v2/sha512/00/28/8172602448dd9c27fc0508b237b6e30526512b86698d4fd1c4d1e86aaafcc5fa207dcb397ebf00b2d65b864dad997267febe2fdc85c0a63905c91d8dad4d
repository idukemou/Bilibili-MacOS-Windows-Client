{"ast":null,"code":"import _defineProperty from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _classCallCheck from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport store from \"../../redux/store\";\n\nvar ContentFrame = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContentFrame, _React$Component);\n\n  var _super = _createSuper(ContentFrame);\n\n  function ContentFrame(props) {\n    var _this2;\n\n    _classCallCheck(this, ContentFrame);\n\n    _this2 = _super.call(this, props);\n    _this2.state = {\n      availableSize: store.getState().availableSize\n    };\n    store.subscribe(function () {\n      return _this2.setState({\n        availableSize: store.getState().availableSize\n      });\n    });\n    return _this2;\n  }\n\n  _createClass(ContentFrame, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsx(\"section\", {\n        style: {\n          width: \"\".concat(this.props.children.length * 100, \"%\"),\n          height: \"\".concat(this.state.availableSize.height, \"px\"),\n          overflow: 'hidden',\n          position: 'absolute',\n          transition: 'left 0.3s',\n          left: \"\".concat(this.props.activeIndex * -this.state.availableSize.width, \"px\")\n        },\n        children: this.props.children\n      });\n    }\n  }]);\n\n  return ContentFrame;\n}(React.Component);\n\nexport { ContentFrame as default };\nexport var Content = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Content, _React$PureComponent);\n\n  var _super2 = _createSuper(Content);\n\n  function Content(props) {\n    var _this3;\n\n    _classCallCheck(this, Content);\n\n    _this3 = _super2.call(this, props);\n    _this3.state = {\n      availableSize: store.getState().availableSize,\n      windowHeight: 0,\n      currentHeight: 0,\n      loading: false,\n      scrollTop: 0\n    };\n    store.subscribe(function () {\n      return _this3.setState({\n        availableSize: store.getState().availableSize\n      });\n    });\n    return _this3;\n  }\n\n  _createClass(Content, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var _this = this;\n\n      this.ref.addEventListener('scroll', function () {\n        _this4.setState({\n          scrollTop: _this.ref.scrollTop\n        });\n\n        if (_this.ref.scrollHeight - _this.state.availableSize.height === _this.ref.scrollTop) {\n          _this4.setState({\n            loading: true\n          });\n        } else {\n          _this4.setState({\n            loading: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/_jsx(\"section\", {\n        style: {\n          width: this.state.availableSize.width + 'px',\n          height: this.state.availableSize.height + 'px',\n          \"float\": \"left\",\n          overflow: 'hidden',\n          display: 'flex',\n          flexWrap: 'wrap',\n          justifyContent: 'center',\n          alignContent: 'flex-start'\n        },\n        children: /*#__PURE__*/_jsx(\"section\", {\n          ref: function ref(_ref) {\n            return _this5.ref = _ref;\n          },\n          className: \"recommend-item-wrapper\",\n          style: {\n            width: this.state.availableSize.width + 'px',\n            height: this.state.availableSize.height + 'px'\n          },\n          children: React.Children.map(this.props.children, function (child) {\n            if (! /*#__PURE__*/React.isValidElement(child)) {\n              return null;\n            }\n\n            var childProps = _objectSpread(_objectSpread({}, child.props), {}, {\n              loading: _this5.state.loading,\n              position: _this5.state.scrollTop\n            });\n\n            return /*#__PURE__*/React.cloneElement(child, childProps);\n          })\n        })\n      });\n    }\n  }]);\n\n  return Content;\n}(React.PureComponent);","map":null,"metadata":{},"sourceType":"module"}