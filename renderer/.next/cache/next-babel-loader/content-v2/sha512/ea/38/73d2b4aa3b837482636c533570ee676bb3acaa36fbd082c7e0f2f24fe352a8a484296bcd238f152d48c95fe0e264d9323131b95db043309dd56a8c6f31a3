{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/contentFrame.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport store from \"../../redux/store\";\nexport default class ContentFrame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      availableSize: store.getState().availableSize\n    };\n    store.subscribe(() => this.setState({\n      availableSize: store.getState().availableSize\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        width: `${this.props.children.length * 100}%`,\n        height: `${this.state.availableSize.height}px`,\n        overflow: 'hidden',\n        position: 'absolute',\n        transition: 'left 0.3s',\n        left: `${this.props.activeIndex * -this.state.availableSize.width}px`\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport function Content() {\n  const ref = useRef(null);\n  const {\n    0: availableSize,\n    1: setAvailableSize\n  } = useState(store.getState().availableSize);\n  const {\n    0: windowHeight,\n    1: setWindowHeight\n  } = useState(0);\n  const {\n    0: currentHeight,\n    1: setCurrentHeight\n  } = useState(0);\n  const {\n    0: reachEnd,\n    1: setReachEnd\n  } = useState(false);\n  const {\n    0: scrollTop,\n    1: setScrollTop\n  } = useState(0);\n  useEffect(() => {\n    store.subscribe(() => setAvailableSize(store.getState().availableSize));\n  }, [store.getState().availableSize.width, store.getState().availableSize.height]);\n  useEffect(() => {\n    ref.current.addEventListener('scroll', () => {\n      setScrollTop(ref.current.scrollTop);\n\n      if (ref.current.scrollHeight - availableSize.height === ref.current.scrollTop) {\n        setReachEnd(true);\n      } else {\n        setReachEnd(false);\n      }\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      width: availableSize.width + 'px',\n      height: availableSize.height + 'px',\n      float: \"left\",\n      overflow: 'hidden',\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      alignContent: 'flex-start'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      ref: ref,\n      className: \"recommend-item-wrapper\",\n      style: {\n        width: availableSize.width + 'px',\n        height: availableSize.height + 'px'\n      },\n      children: React.Children.map(this.props.children, child => {\n        if (! /*#__PURE__*/React.isValidElement(child)) {\n          return null;\n        }\n\n        const childProps = _objectSpread(_objectSpread({}, child.props), {}, {\n          loading: this.state.loading,\n          position: this.state.scrollTop\n        });\n\n        return /*#__PURE__*/React.cloneElement(child, childProps);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/contentFrame.jsx"],"names":["React","useEffect","useRef","useState","store","ContentFrame","Component","constructor","props","state","availableSize","getState","subscribe","setState","render","width","children","length","height","overflow","position","transition","left","activeIndex","Content","ref","setAvailableSize","windowHeight","setWindowHeight","currentHeight","setCurrentHeight","reachEnd","setReachEnd","scrollTop","setScrollTop","current","addEventListener","scrollHeight","float","display","flexWrap","justifyContent","alignContent","Children","map","child","isValidElement","childProps","loading","cloneElement"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\nimport store from \"../../redux/store\";\n\nexport default class ContentFrame extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            availableSize: store.getState().availableSize\n        }\n        store.subscribe(() => this.setState({\n            availableSize: store.getState().availableSize\n        }))\n    }\n\n\n    render() {\n        return(\n            <section\n                style={{\n                    width:(`${this.props.children.length * 100}%`),\n                    height:(`${this.state.availableSize.height}px`),\n                    overflow: 'hidden',\n                    position: 'absolute',\n                    transition: 'left 0.3s',\n                    left: (`${this.props.activeIndex * -this.state.availableSize.width}px`)\n                }}>\n                {\n                    this.props.children\n                }\n            </section>\n        )\n    }\n}\n\nexport function Content(){\n\n    const ref = useRef(null);\n\n    const [availableSize, setAvailableSize] = useState(store.getState().availableSize);\n    const [windowHeight, setWindowHeight] = useState(0);\n    const [currentHeight, setCurrentHeight] = useState(0);\n    const [reachEnd, setReachEnd] = useState(false);\n    const [scrollTop, setScrollTop] = useState(0);\n\n    useEffect(() => {\n        store.subscribe(() => setAvailableSize(store.getState().availableSize))\n    }, [store.getState().availableSize.width, store.getState().availableSize.height]);\n\n\n    useEffect(() => {\n        ref.current.addEventListener('scroll', () => {\n\n            setScrollTop(ref.current.scrollTop);\n\n            if (ref.current.scrollHeight - availableSize.height === ref.current.scrollTop) {\n                setReachEnd(true);\n            } else {\n                setReachEnd(false);\n            }\n        })\n    })\n\n    return(\n        <section\n            style={{\n                width: availableSize.width+'px',\n                height: availableSize.height+'px',\n                float: \"left\",\n                overflow: 'hidden',\n                display: 'flex',\n                flexWrap: 'wrap',\n                justifyContent: 'center',\n                alignContent: 'flex-start',\n            }}\n        >\n            <section\n                ref={ref}\n                className='recommend-item-wrapper'\n                style={{\n                    width: availableSize.width+'px',\n                    height: availableSize.height+'px',\n                }}\n            >\n                {\n                    React.Children.map(this.props.children, (child) => {\n                        if (!React.isValidElement(child)) {\n                            return null\n                        }\n                        const childProps = {\n                            ...child.props,\n                            loading: this.state.loading,\n                            position: this.state.scrollTop\n                        }\n                        return React.cloneElement(child, childProps)\n                    })\n                }\n            </section>\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}