{"ast":null,"code":"import \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/searchPage/search.jsx\";\nimport { useEffect, useRef, useState } from \"react\";\nimport Header from \"../layout/header\";\nimport '../../styles/search.css';\nimport electron from \"electron\";\nconst ipcRenderer = electron.ipcRenderer || false;\nexport default function Search(props) {\n  const searchRef = useRef(null);\n  const {\n    0: value,\n    1: setValue\n  } = useState(\"\");\n  const {\n    0: hotWords,\n    1: setHotWords\n  } = useState([]);\n  const {\n    0: searchHistory,\n    1: setSearchHistory\n  } = useState([]);\n  const {\n    0: showSuggestWords,\n    1: setShowSuggestWords\n  } = useState(false);\n  const {\n    0: suggestWords,\n    1: setSuggestWords\n  } = useState([]);\n  const {\n    0: timer,\n    1: setTimer\n  } = useState(null);\n  const {\n    0: locker,\n    1: setLocker\n  } = useState(false);\n  useEffect(() => {\n    if (ipcRenderer) {\n      ipcRenderer.invoke(\"get_search_hot_words\").then(res => {\n        if (res.code === 0) {\n          setHotWords(res.list);\n        }\n      });\n    }\n  }, [props.pageStatus]);\n  useEffect(() => {\n    if (ipcRenderer && locker) {\n      console.log(value);\n      ipcRenderer.invoke(\"get_search_suggest_words\", value).then(data => {\n        if (data.code === 0) {\n          setSuggestWords(data.result);\n        }\n      });\n    }\n  }, [locker]);\n\n  function searchRequest() {\n    searchRef.current.blur();\n  }\n\n  function handleWordChange({\n    target: {\n      value\n    }\n  }) {\n    clearTimeout(timer);\n    setLocker(false);\n\n    if (value.length === 0) {\n      setShowSuggestWords(false);\n      setSuggestWords([]);\n      return;\n    }\n\n    setShowSuggestWords(true);\n    setValue(value);\n    setTimer(setTimeout(() => {\n      setLocker(true);\n    }, 200));\n  }\n\n  function searchKeyword(keyword) {\n    setShowSuggestWords(false);\n    setSuggestWords([]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: `search-page-container ${props.pageStatus ? '' : 'search-page-hide'}`,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      center: /*#__PURE__*/_jsxDEV(_Input, {\n        id: \"search-bar\",\n        placeholder: \"\\u641C\\u7D22\\u89C6\\u9891\\u3001\\u756A\\u5267\\u6216up\\u4E3B\",\n        prefix: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"iconfont icon-search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 33\n        }, this),\n        onPressEnter: () => searchRequest(),\n        onChange: e => handleWordChange(e),\n        ref: searchRef,\n        allowClear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this),\n      right: /*#__PURE__*/_jsxDEV(_Button, {\n        type: \"link\",\n        className: \"search-cancel-button\",\n        onClick: () => props.setPageStatus(false),\n        children: \"\\u53D6\\u6D88\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-page-default-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-page-hot-search-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-options-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u5927\\u5BB6\\u90FD\\u5728\\u641C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-content\",\n          children: hotWords.map((word, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"search-page-hot-word-item\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: word.keyword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-page-search-history\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-options-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u641C\\u7D22\\u5386\\u53F2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-page-default-content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), showSuggestWords && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-page-suggest-words\",\n      children: suggestWords !== undefined && suggestWords.map((suggest, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-page-suggest-word\",\n        onClick: () => searchKeyword(suggest.value),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"iconfont icon-search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: suggest.name\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 89\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 37\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/searchPage/search.jsx"],"names":["useEffect","useRef","useState","Header","electron","ipcRenderer","Search","props","searchRef","value","setValue","hotWords","setHotWords","searchHistory","setSearchHistory","showSuggestWords","setShowSuggestWords","suggestWords","setSuggestWords","timer","setTimer","locker","setLocker","invoke","then","res","code","list","pageStatus","console","log","data","result","searchRequest","current","blur","handleWordChange","target","clearTimeout","length","setTimeout","searchKeyword","keyword","e","setPageStatus","map","word","index","undefined","suggest","__html","name"],"mappings":"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","sourcesContent":["import {useEffect, useRef, useState} from \"react\";\nimport Header from \"../layout/header\";\nimport {Button, Input} from \"antd\";\nimport '../../styles/search.css';\nimport electron from \"electron\";\n\nconst ipcRenderer = electron.ipcRenderer || false;\n\nexport default function Search(props){\n\n    const searchRef = useRef(null);\n\n    const [value, setValue] = useState(\"\");\n\n    const [hotWords, setHotWords] = useState([]);\n    const [searchHistory, setSearchHistory] = useState([]);\n\n    const [showSuggestWords, setShowSuggestWords] = useState(false);\n    const [suggestWords, setSuggestWords] = useState([]);\n    const [timer, setTimer] = useState(null);\n    const [locker, setLocker] = useState(false);\n\n\n    useEffect(() => {\n        if(ipcRenderer){\n            ipcRenderer.invoke(\"get_search_hot_words\")\n                .then((res) => {\n                   if(res.code === 0){\n                       setHotWords(res.list);\n                   }\n                });\n        }\n    }, [props.pageStatus]);\n\n    useEffect(() => {\n        if(ipcRenderer && locker){\n            console.log(value);\n            ipcRenderer.invoke(\"get_search_suggest_words\", value)\n                .then((data) => {\n                    if(data.code === 0){\n                        setSuggestWords(data.result);\n                    }\n                })\n        }\n    }, [locker]);\n\n    function searchRequest(){\n        searchRef.current.blur();\n    }\n\n    function handleWordChange({target: {value}}){\n        clearTimeout(timer);\n        setLocker(false);\n\n        if(value.length === 0){\n            setShowSuggestWords(false);\n            setSuggestWords([]);\n            return;\n        }\n\n        setShowSuggestWords(true);\n        setValue(value);\n\n        setTimer(setTimeout(() => {\n            setLocker(true);\n        }, 200));\n    }\n\n    function searchKeyword(keyword){\n        setShowSuggestWords(false);\n        setSuggestWords([]);\n    }\n\n    return(\n        <section className={`search-page-container ${props.pageStatus ? '': 'search-page-hide'}`}>\n            <Header\n                center={\n                    <Input\n                        id='search-bar'\n                        placeholder=\"搜索视频、番剧或up主\"\n                        prefix={<i className='iconfont icon-search'/>}\n                        onPressEnter={() => searchRequest()}\n                        onChange={(e) => handleWordChange(e)}\n                        ref={searchRef}\n                        allowClear\n                    />\n                }\n\n                right={\n                    <Button\n                        type='link'\n                        className=\"search-cancel-button\"\n                        onClick={() => props.setPageStatus(false)}\n                    >\n                        取消\n                    </Button>\n                }\n            />\n\n            <section className=\"search-page-default-options\">\n                <div className=\"search-page-hot-search-wrapper\">\n                    <div className=\"search-page-default-options-header\">\n                        <span>大家都在搜</span>\n                    </div>\n\n                    <div className=\"search-page-default-content\">\n                        {\n                            hotWords.map((word, index) => (\n                                <button key={index} className=\"search-page-hot-word-item\">\n                                    <span>{word.keyword}</span>\n                                </button>\n                            ))\n                        }\n                    </div>\n                </div>\n\n                <div className=\"search-page-search-history\">\n                    <div className=\"search-page-default-options-header\">\n                        <span>搜索历史</span>\n                    </div>\n\n                    <div className=\"search-page-default-content\">\n\n                    </div>\n                </div>\n            </section>\n\n            {\n                showSuggestWords && <div className=\"search-page-suggest-words\">\n                    {\n                        suggestWords !== undefined && suggestWords.map((suggest, index) => (\n                            <div className=\"search-page-suggest-word\" key={index} onClick={() => searchKeyword(suggest.value)}>\n                                <i className=\"iconfont icon-search\"/>\n                                <span dangerouslySetInnerHTML={{__html:suggest.name}} /><br/>\n                            </div>\n                        ))\n                    }\n                </div>\n            }\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}