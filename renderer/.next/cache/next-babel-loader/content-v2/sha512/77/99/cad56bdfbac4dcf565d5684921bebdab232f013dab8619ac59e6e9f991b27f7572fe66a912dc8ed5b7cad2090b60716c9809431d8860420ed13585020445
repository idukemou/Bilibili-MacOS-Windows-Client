{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport '../../styles/layout.css';\nimport App from \"../homePage/app\";\nimport Category from \"../categoryPage/category\";\nimport News from \"../newsPage/news\";\nimport User from \"../userPage/user\";\nimport store from '../../redux/store';\nimport { countAvailableClientHeightAction } from \"../../redux/actionCreators\";\nconst menuList = [{\n  name: '首页',\n  href: '/app',\n  icon: 'icon-shouye'\n}, {\n  name: '分区',\n  href: '/category',\n  icon: 'icon-category'\n}, {\n  name: '动态',\n  href: '/news',\n  icon: 'icon-dongtai'\n}, {\n  name: '我的',\n  href: '/user',\n  icon: 'icon-bilibili-line'\n}];\nexport default class Layout extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"init\", () => {\n      this.setState({\n        autoHeight: window.innerHeight - 60\n      }, () => {\n        store.dispatch(countAvailableClientHeightAction({\n          width: window.innerWidth,\n          height: window.innerHeight - 120\n        }));\n      });\n    });\n\n    _defineProperty(this, \"handleChangePage\", page => {\n      this.setState({\n        page\n      });\n    });\n\n    this.state = {\n      page: '/app',\n      autoHeight: 0,\n      scroll: {\n        app: 0,\n        category: 0,\n        news: 0,\n        user: 0\n      }\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    switch (nextState.page) {\n      case '/app':\n        this.section.scrollTo(0, nextState.scroll.app);\n        break;\n\n      case '/category':\n        this.section.scrollTo(0, nextState.scroll.category);\n        break;\n\n      case '/news':\n        this.section.scrollTo(0, nextState.scroll.news);\n        break;\n\n      case '/user':\n        this.section.scrollTo(0, nextState.scroll.user);\n    }\n\n    return true;\n  }\n\n  componentDidMount() {\n    const _this = this;\n\n    this.init();\n    /* 自动设置全局导航和全局内容区块的高度和位置 */\n\n    window.addEventListener('resize', e => {\n      _this.init();\n    });\n    /* 设置页面的实时高度 */\n\n    this.section.addEventListener('scroll', () => {\n      let top = _this.section.scrollTop;\n      const newState = JSON.parse(JSON.stringify(this.state));\n\n      switch (_this.state.page) {\n        case '/app':\n          newState.scroll.app = top;\n          break;\n\n        case '/category':\n          newState.scroll.category = top;\n          break;\n\n        case '/news':\n          newState.scroll.news = top;\n          break;\n\n        case '/user':\n          newState.scroll.user = top;\n      }\n\n      this.setState(newState);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        id: \"layout-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          id: \"layout-content-container\",\n          ref: section => this.section = section,\n          className: _JSXStyle.dynamic([[\"4184239453\", [this.state.autoHeight]]]),\n          children: [/*#__PURE__*/_jsxDEV(App, {\n            display: this.state.page === '/app' ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Category, {\n            display: this.state.page === '/category' ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(News, {\n            display: this.state.page === '/news' ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(User, {\n            display: this.state.page === '/user' ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n            id: \"4184239453\",\n            dynamic: [this.state.autoHeight],\n            children: `#layout-content-container.__jsx-style-dynamic-selector{width:100%;height:${this.state.autoHeight}px;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2xheW91dC9sYXlvdXQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdINkIsQUFHNEMsV0FDMkIsc0NBQ3hDIiwiZmlsZSI6Ii9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2xheW91dC9sYXlvdXQuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi4vLi4vc3R5bGVzL2xheW91dC5jc3MnO1xuaW1wb3J0IEFwcCBmcm9tIFwiLi4vaG9tZVBhZ2UvYXBwXCI7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSBcIi4uL2NhdGVnb3J5UGFnZS9jYXRlZ29yeVwiO1xuaW1wb3J0IE5ld3MgZnJvbSBcIi4uL25ld3NQYWdlL25ld3NcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi91c2VyUGFnZS91c2VyXCI7XG5pbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vcmVkdXgvc3RvcmUnXG5pbXBvcnQge2NvdW50QXZhaWxhYmxlQ2xpZW50SGVpZ2h0QWN0aW9ufSBmcm9tIFwiLi4vLi4vcmVkdXgvYWN0aW9uQ3JlYXRvcnNcIjtcblxuY29uc3QgbWVudUxpc3QgPSBbXG4gICAge25hbWU6ICfpppbpobUnLCBocmVmOiAnL2FwcCcsIGljb246ICdpY29uLXNob3V5ZSd9LFxuICAgIHtuYW1lOiAn5YiG5Yy6JywgaHJlZjogJy9jYXRlZ29yeScsIGljb246ICdpY29uLWNhdGVnb3J5J30sXG4gICAge25hbWU6ICfliqjmgIEnLCBocmVmOiAnL25ld3MnLCBpY29uOiAnaWNvbi1kb25ndGFpJ30sXG4gICAge25hbWU6ICfmiJHnmoQnLCBocmVmOiAnL3VzZXInLCBpY29uOiAnaWNvbi1iaWxpYmlsaS1saW5lJ31cbl1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGF5b3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcGFnZTogJy9hcHAnLFxuICAgICAgICAgICAgYXV0b0hlaWdodDogMCxcbiAgICAgICAgICAgIHNjcm9sbDoge1xuICAgICAgICAgICAgICAgIGFwcDogMCxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogMCxcbiAgICAgICAgICAgICAgICBuZXdzOiAwLFxuICAgICAgICAgICAgICAgIHVzZXI6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSwgbmV4dENvbnRleHQpIHtcbiAgICAgICAgc3dpdGNoKG5leHRTdGF0ZS5wYWdlKXtcbiAgICAgICAgICAgIGNhc2UgJy9hcHAnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbi5zY3JvbGxUbygwLCBuZXh0U3RhdGUuc2Nyb2xsLmFwcCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcvY2F0ZWdvcnknOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbi5zY3JvbGxUbygwLCBuZXh0U3RhdGUuc2Nyb2xsLmNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJy9uZXdzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb24uc2Nyb2xsVG8oMCwgbmV4dFN0YXRlLnNjcm9sbC5uZXdzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJy91c2VyJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb24uc2Nyb2xsVG8oMCwgbmV4dFN0YXRlLnNjcm9sbC51c2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGluaXQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYXV0b0hlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gNjBcbiAgICAgICAgfSwoKSA9PiB7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaChjb3VudEF2YWlsYWJsZUNsaWVudEhlaWdodEFjdGlvbih7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gMTIwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgICAgIC8qIOiHquWKqOiuvue9ruWFqOWxgOWvvOiIquWSjOWFqOWxgOWGheWuueWMuuWdl+eahOmrmOW6puWSjOS9jee9riAqL1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKGUpID0+IHtcbiAgICAgICAgICAgIF90aGlzLmluaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyog6K6+572u6aG16Z2i55qE5a6e5pe26auY5bqmICovXG4gICAgICAgIHRoaXMuc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCB0b3AgPSBfdGhpcy5zZWN0aW9uLnNjcm9sbFRvcDtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlKSk7XG5cbiAgICAgICAgICAgIHN3aXRjaChfdGhpcy5zdGF0ZS5wYWdlKXtcbiAgICAgICAgICAgICAgICBjYXNlICcvYXBwJzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuc2Nyb2xsLmFwcCA9IHRvcDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnL2NhdGVnb3J5JzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuc2Nyb2xsLmNhdGVnb3J5ID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcvbmV3cyc6XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNjcm9sbC5uZXdzID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcvdXNlcic6XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlLnNjcm9sbC51c2VyID0gdG9wO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2VQYWdlID0gKHBhZ2UpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwYWdlXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4oXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwibGF5b3V0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBpZD1cImxheW91dC1jb250ZW50LWNvbnRhaW5lclwiIHJlZj17c2VjdGlvbiA9PiB0aGlzLnNlY3Rpb24gPSBzZWN0aW9ufT5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPEFwcCBkaXNwbGF5PXt0aGlzLnN0YXRlLnBhZ2UgPT09ICcvYXBwJyA/ICB0cnVlOiBmYWxzZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXRlZ29yeSBkaXNwbGF5PXt0aGlzLnN0YXRlLnBhZ2UgPT09ICcvY2F0ZWdvcnknID8gIHRydWU6IGZhbHNlfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPE5ld3MgZGlzcGxheT17dGhpcy5zdGF0ZS5wYWdlID09PSAnL25ld3MnID8gIHRydWU6IGZhbHNlfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFVzZXIgZGlzcGxheT17dGhpcy5zdGF0ZS5wYWdlID09PSAnL3VzZXInID8gIHRydWU6IGZhbHNlfSAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjbGF5b3V0LWNvbnRlbnQtY29udGFpbmVye1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke3RoaXMuc3RhdGUuYXV0b0hlaWdodH1weDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuXG4gICAgICAgICAgICAgICAgICAgIDxmb290ZXIgaWQ9XCJsYXlvdXQtbmF2aWdhdGlvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51TGlzdC5tYXAoKG1lbnUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQtbmF2aWdhdGlvbi1pdGVtIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7KG1lbnUuaHJlZi5pbmNsdWRlcyh0aGlzLnN0YXRlLnBhZ2UpID8gJ2FjdGl2ZSc6ICcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e21lbnUuaHJlZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuaGFuZGxlQ2hhbmdlUGFnZShtZW51LmhyZWYpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9e2BpY29uZm9udCAke21lbnUuaWNvbn0gbGF5b3V0LW5hdmlnYXRpb24taWNvbmB9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bWVudS5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDwvZm9vdGVyPlxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICApXG4gICAgfVxufSJdfQ== */\n/*@ sourceURL=/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx */`\n          }, void 0, false, void 0, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          id: \"layout-navigation-container\",\n          children: menuList.map((menu, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n            className: `\n                                        layout-navigation-item \n                                        ${menu.href.includes(this.state.page) ? 'active' : ''}\n                                    `,\n            onClick: () => this.handleChangePage(menu.href),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: `iconfont ${menu.icon} layout-navigation-icon`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: menu.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 37\n            }, this)]\n          }, menu.href, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx"],"names":["React","App","Category","News","User","store","countAvailableClientHeightAction","menuList","name","href","icon","Layout","Component","constructor","props","setState","autoHeight","window","innerHeight","dispatch","width","innerWidth","height","page","state","scroll","app","category","news","user","shouldComponentUpdate","nextProps","nextState","nextContext","section","scrollTo","componentDidMount","_this","init","addEventListener","e","top","scrollTop","newState","JSON","parse","stringify","render","map","menu","index","includes","handleChangePage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../styles/layout.css';\nimport App from \"../homePage/app\";\nimport Category from \"../categoryPage/category\";\nimport News from \"../newsPage/news\";\nimport User from \"../userPage/user\";\nimport store from '../../redux/store'\nimport {countAvailableClientHeightAction} from \"../../redux/actionCreators\";\n\nconst menuList = [\n    {name: '首页', href: '/app', icon: 'icon-shouye'},\n    {name: '分区', href: '/category', icon: 'icon-category'},\n    {name: '动态', href: '/news', icon: 'icon-dongtai'},\n    {name: '我的', href: '/user', icon: 'icon-bilibili-line'}\n]\n\nexport default class Layout extends React.Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            page: '/app',\n            autoHeight: 0,\n            scroll: {\n                app: 0,\n                category: 0,\n                news: 0,\n                user: 0\n            }\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        switch(nextState.page){\n            case '/app':\n                this.section.scrollTo(0, nextState.scroll.app);\n                break;\n            case '/category':\n                this.section.scrollTo(0, nextState.scroll.category);\n                break;\n            case '/news':\n                this.section.scrollTo(0, nextState.scroll.news);\n                break;\n            case '/user':\n                this.section.scrollTo(0, nextState.scroll.user);\n        }\n\n        return true;\n    }\n\n    init = () => {\n        this.setState({\n            autoHeight: window.innerHeight - 60\n        },() => {\n            store.dispatch(countAvailableClientHeightAction({\n                width: window.innerWidth,\n                height: window.innerHeight - 120\n            }));\n        });\n    }\n\n    componentDidMount() {\n        const _this = this;\n        this.init();\n\n        /* 自动设置全局导航和全局内容区块的高度和位置 */\n        window.addEventListener('resize', (e) => {\n            _this.init();\n        });\n\n        /* 设置页面的实时高度 */\n        this.section.addEventListener('scroll', () => {\n\n            let top = _this.section.scrollTop;\n            const newState = JSON.parse(JSON.stringify(this.state));\n\n            switch(_this.state.page){\n                case '/app':\n                    newState.scroll.app = top;\n                    break;\n                case '/category':\n                    newState.scroll.category = top;\n                    break;\n                case '/news':\n                    newState.scroll.news = top;\n                    break;\n                case '/user':\n                    newState.scroll.user = top;\n            }\n\n            this.setState(newState)\n        });\n    }\n\n    handleChangePage = (page) => {\n        this.setState({\n            page\n        })\n    }\n\n    render() {\n        return(\n            <>\n                <section id=\"layout-container\">\n                    <section id=\"layout-content-container\" ref={section => this.section = section}>\n\n                        <App display={this.state.page === '/app' ?  true: false} />\n                        <Category display={this.state.page === '/category' ?  true: false} />\n                        <News display={this.state.page === '/news' ?  true: false} />\n                        <User display={this.state.page === '/user' ?  true: false} />\n\n                        <style jsx>\n                            {`\n                              #layout-content-container{\n                                width: 100%;\n                                height: ${this.state.autoHeight}px;\n                              }\n                            `}\n                        </style>\n                    </section>\n\n                    <footer id=\"layout-navigation-container\">\n                        {\n                            menuList.map((menu, index) => (\n                                <a\n                                    className={`\n                                        layout-navigation-item \n                                        ${(menu.href.includes(this.state.page) ? 'active': '')}\n                                    `}\n                                    key={menu.href}\n                                    onClick={() => this.handleChangePage(menu.href)}\n                                >\n                                    <i className={`iconfont ${menu.icon} layout-navigation-icon`} />\n                                    <span>{menu.name}</span>\n                                </a>\n                            ))\n                        }\n                    </footer>\n                </section>\n            </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}