{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport '../../styles/layout.css';\nimport App from \"../homePage/app\";\nimport Category from \"../categoryPage/category\";\nimport News from \"../newsPage/news\";\nimport User from \"../userPage/user\";\nimport store from '../../redux/store';\nimport { countAvailableClientHeightAction } from \"../../redux/actionCreators\";\nvar menuList = [{\n  name: '首页',\n  href: '/app',\n  icon: 'icon-shouye'\n}, {\n  name: '分区',\n  href: '/category',\n  icon: 'icon-category'\n}, {\n  name: '动态',\n  href: '/news',\n  icon: 'icon-dongtai'\n}, {\n  name: '我的',\n  href: '/user',\n  icon: 'icon-bilibili-line'\n}];\n\nvar Layout = /*#__PURE__*/function (_React$Component) {\n  _inherits(Layout, _React$Component);\n\n  var _super = _createSuper(Layout);\n\n  function Layout(props) {\n    var _this2;\n\n    _classCallCheck(this, Layout);\n\n    _this2 = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this2), \"init\", function () {\n      _this2.setState({\n        autoHeight: window.innerHeight - 60\n      }, function () {\n        store.dispatch(countAvailableClientHeightAction({\n          width: window.innerWidth,\n          height: window.innerHeight - 120\n        }));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"handleChangePage\", function (page) {\n      _this2.setState({\n        page: page\n      });\n    });\n\n    _this2.state = {\n      page: '/app',\n      autoHeight: 0,\n      scroll: {\n        app: 0,\n        category: 0,\n        news: 0,\n        user: 0\n      }\n    };\n    return _this2;\n  }\n\n  _createClass(Layout, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState, nextContext) {\n      switch (nextState.page) {\n        case '/app':\n          this.section.scrollTo(0, nextState.scroll.app);\n          break;\n\n        case '/category':\n          this.section.scrollTo(0, nextState.scroll.category);\n          break;\n\n        case '/news':\n          this.section.scrollTo(0, nextState.scroll.news);\n          break;\n\n        case '/user':\n          this.section.scrollTo(0, nextState.scroll.user);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var _this = this;\n\n      this.setState({\n        autoHeight: window.innerHeight - 60\n      }, function () {\n        store.dispatch(countAvailableClientHeightAction({\n          width: window.innerWidth,\n          height: window.innerHeight - 120\n        }));\n      });\n      /* 自动设置全局导航和全局内容区块的高度和位置 */\n\n      window.addEventListener('resize', function (e) {\n        _this3.setState({\n          autoHeight: window.innerHeight - 60\n        }, function () {\n          store.dispatch(countAvailableClientHeightAction({\n            width: window.innerWidth,\n            height: window.innerHeight - 120\n          }));\n        });\n      });\n      /* 设置页面的实时高度 */\n\n      this.section.addEventListener('scroll', function () {\n        var top = _this.section.scrollTop;\n        var newState = JSON.parse(JSON.stringify(_this3.state));\n\n        switch (_this.state.page) {\n          case '/app':\n            newState.scroll.app = top;\n            break;\n\n          case '/category':\n            newState.scroll.category = top;\n            break;\n\n          case '/news':\n            newState.scroll.news = top;\n            break;\n\n          case '/user':\n            newState.scroll.user = top;\n        }\n\n        _this3.setState(newState);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          id: \"layout-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            id: \"layout-content-container\",\n            ref: function ref(section) {\n              return _this4.section = section;\n            },\n            className: _JSXStyle.dynamic([[\"4184239453\", [this.state.autoHeight]]]),\n            children: [/*#__PURE__*/_jsxDEV(App, {\n              display: this.state.page === '/app' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Category, {\n              display: this.state.page === '/category' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(News, {\n              display: this.state.page === '/news' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(User, {\n              display: this.state.page === '/user' ? true : false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n              id: \"4184239453\",\n              dynamic: [this.state.autoHeight],\n              children: \"#layout-content-container.__jsx-style-dynamic-selector{width:100%;height:\".concat(this.state.autoHeight, \"px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2xheW91dC9sYXlvdXQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStJNkIsQUFHNEMsV0FDMkIsc0NBQ3hDIiwiZmlsZSI6Ii9Vc2Vycy95dXh1YW4vRGVza3RvcC9CaWxpYmlsaS1NYWNPUy1XaW5kb3dzLUNsaWVudC9yZW5kZXJlci9jb21wb25lbnRzL2xheW91dC9sYXlvdXQuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi4vLi4vc3R5bGVzL2xheW91dC5jc3MnO1xuaW1wb3J0IEFwcCBmcm9tIFwiLi4vaG9tZVBhZ2UvYXBwXCI7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSBcIi4uL2NhdGVnb3J5UGFnZS9jYXRlZ29yeVwiO1xuaW1wb3J0IE5ld3MgZnJvbSBcIi4uL25ld3NQYWdlL25ld3NcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi91c2VyUGFnZS91c2VyXCI7XG5pbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vcmVkdXgvc3RvcmUnXG5pbXBvcnQge2NvdW50QXZhaWxhYmxlQ2xpZW50SGVpZ2h0QWN0aW9ufSBmcm9tIFwiLi4vLi4vcmVkdXgvYWN0aW9uQ3JlYXRvcnNcIjtcblxuY29uc3QgbWVudUxpc3QgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiAn6aaW6aG1JyxcbiAgICAgICAgaHJlZjogJy9hcHAnLFxuICAgICAgICBpY29uOiAnaWNvbi1zaG91eWUnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfliIbljLonLFxuICAgICAgICBocmVmOiAnL2NhdGVnb3J5JyxcbiAgICAgICAgaWNvbjogJ2ljb24tY2F0ZWdvcnknXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfliqjmgIEnLFxuICAgICAgICBocmVmOiAnL25ld3MnLFxuICAgICAgICBpY29uOiAnaWNvbi1kb25ndGFpJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn5oiR55qEJyxcbiAgICAgICAgaHJlZjogJy91c2VyJyxcbiAgICAgICAgaWNvbjogJ2ljb24tYmlsaWJpbGktbGluZSdcbiAgICB9XG5dXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExheW91dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHBhZ2U6ICcvYXBwJyxcbiAgICAgICAgICAgIGF1dG9IZWlnaHQ6IDAsXG4gICAgICAgICAgICBzY3JvbGw6IHtcbiAgICAgICAgICAgICAgICBhcHA6IDAsXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IDAsXG4gICAgICAgICAgICAgICAgbmV3czogMCxcbiAgICAgICAgICAgICAgICB1c2VyOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0KSB7XG4gICAgICAgIHN3aXRjaChuZXh0U3RhdGUucGFnZSl7XG4gICAgICAgICAgICBjYXNlICcvYXBwJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb24uc2Nyb2xsVG8oMCwgbmV4dFN0YXRlLnNjcm9sbC5hcHApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnL2NhdGVnb3J5JzpcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb24uc2Nyb2xsVG8oMCwgbmV4dFN0YXRlLnNjcm9sbC5jYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcvbmV3cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uLnNjcm9sbFRvKDAsIG5leHRTdGF0ZS5zY3JvbGwubmV3cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcvdXNlcic6XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uLnNjcm9sbFRvKDAsIG5leHRTdGF0ZS5zY3JvbGwudXNlcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpbml0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGF1dG9IZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDYwXG4gICAgICAgIH0sKCkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goY291bnRBdmFpbGFibGVDbGllbnRIZWlnaHRBY3Rpb24oe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDEyMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhdXRvSGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSA2MFxuICAgICAgICB9LCgpID0+IHtcbiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKGNvdW50QXZhaWxhYmxlQ2xpZW50SGVpZ2h0QWN0aW9uKHtcbiAgICAgICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMjBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyog6Ieq5Yqo6K6+572u5YWo5bGA5a+86Iiq5ZKM5YWo5bGA5YaF5a655Yy65Z2X55qE6auY5bqm5ZKM5L2N572uICovXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgYXV0b0hlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gNjBcbiAgICAgICAgICAgIH0sKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKGNvdW50QXZhaWxhYmxlQ2xpZW50SGVpZ2h0QWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDEyMFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiDorr7nva7pobXpnaLnmoTlrp7ml7bpq5jluqYgKi9cbiAgICAgICAgdGhpcy5zZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblxuICAgICAgICAgICAgbGV0IHRvcCA9IF90aGlzLnNlY3Rpb24uc2Nyb2xsVG9wO1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUpKTtcblxuICAgICAgICAgICAgc3dpdGNoKF90aGlzLnN0YXRlLnBhZ2Upe1xuICAgICAgICAgICAgICAgIGNhc2UgJy9hcHAnOlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5zY3JvbGwuYXBwID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcvY2F0ZWdvcnknOlxuICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5zY3JvbGwuY2F0ZWdvcnkgPSB0b3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJy9uZXdzJzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuc2Nyb2xsLm5ld3MgPSB0b3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJy91c2VyJzpcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuc2Nyb2xsLnVzZXIgPSB0b3A7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZVBhZ2UgPSAocGFnZSkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBhZ2VcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybihcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJsYXlvdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwibGF5b3V0LWNvbnRlbnQtY29udGFpbmVyXCIgcmVmPXtzZWN0aW9uID0+IHRoaXMuc2VjdGlvbiA9IHNlY3Rpb259PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8QXBwIGRpc3BsYXk9e3RoaXMuc3RhdGUucGFnZSA9PT0gJy9hcHAnID8gIHRydWU6IGZhbHNlfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENhdGVnb3J5IGRpc3BsYXk9e3RoaXMuc3RhdGUucGFnZSA9PT0gJy9jYXRlZ29yeScgPyAgdHJ1ZTogZmFsc2V9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TmV3cyBkaXNwbGF5PXt0aGlzLnN0YXRlLnBhZ2UgPT09ICcvbmV3cycgPyAgdHJ1ZTogZmFsc2V9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VXNlciBkaXNwbGF5PXt0aGlzLnN0YXRlLnBhZ2UgPT09ICcvdXNlcicgPyAgdHJ1ZTogZmFsc2V9IC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNsYXlvdXQtY29udGVudC1jb250YWluZXJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICR7dGhpcy5zdGF0ZS5hdXRvSGVpZ2h0fXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG5cbiAgICAgICAgICAgICAgICAgICAgPGZvb3RlciBpZD1cImxheW91dC1uYXZpZ2F0aW9uLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVMaXN0Lm1hcCgobWVudSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dC1uYXZpZ2F0aW9uLWl0ZW0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHsobWVudS5ocmVmLmluY2x1ZGVzKHRoaXMuc3RhdGUucGFnZSkgPyAnYWN0aXZlJzogJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bWVudS5ocmVmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5oYW5kbGVDaGFuZ2VQYWdlKG1lbnUuaHJlZil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT17YGljb25mb250ICR7bWVudS5pY29ufSBsYXlvdXQtbmF2aWdhdGlvbi1pY29uYH0+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e21lbnUubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Zvb3Rlcj5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgKVxuICAgIH1cbn0iXX0= */\\n/*@ sourceURL=/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx */\")\n            }, void 0, false, void 0, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            id: \"layout-navigation-container\",\n            children: menuList.map(function (menu, index) {\n              return /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"\\n                                        layout-navigation-item \\n                                        \".concat(menu.href.includes(_this4.state.page) ? 'active' : '', \"\\n                                    \"),\n                onClick: function onClick() {\n                  return _this4.handleChangePage(menu.href);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"iconfont \".concat(menu.icon, \" layout-navigation-icon\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 37\n                }, _this4), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: menu.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 37\n                }, _this4)]\n              }, menu.href, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, _this4);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this)\n      }, void 0, false);\n    }\n  }]);\n\n  return Layout;\n}(React.Component);\n\nexport { Layout as default };","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/layout/layout.jsx"],"names":["React","App","Category","News","User","store","countAvailableClientHeightAction","menuList","name","href","icon","Layout","props","setState","autoHeight","window","innerHeight","dispatch","width","innerWidth","height","page","state","scroll","app","category","news","user","nextProps","nextState","nextContext","section","scrollTo","_this","addEventListener","e","top","scrollTop","newState","JSON","parse","stringify","map","menu","index","includes","handleChangePage","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../styles/layout.css';\nimport App from \"../homePage/app\";\nimport Category from \"../categoryPage/category\";\nimport News from \"../newsPage/news\";\nimport User from \"../userPage/user\";\nimport store from '../../redux/store'\nimport {countAvailableClientHeightAction} from \"../../redux/actionCreators\";\n\nconst menuList = [\n    {\n        name: '首页',\n        href: '/app',\n        icon: 'icon-shouye'\n    },\n    {\n        name: '分区',\n        href: '/category',\n        icon: 'icon-category'\n    },\n    {\n        name: '动态',\n        href: '/news',\n        icon: 'icon-dongtai'\n    },\n    {\n        name: '我的',\n        href: '/user',\n        icon: 'icon-bilibili-line'\n    }\n]\n\nexport default class Layout extends React.Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            page: '/app',\n            autoHeight: 0,\n            scroll: {\n                app: 0,\n                category: 0,\n                news: 0,\n                user: 0\n            }\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        switch(nextState.page){\n            case '/app':\n                this.section.scrollTo(0, nextState.scroll.app);\n                break;\n            case '/category':\n                this.section.scrollTo(0, nextState.scroll.category);\n                break;\n            case '/news':\n                this.section.scrollTo(0, nextState.scroll.news);\n                break;\n            case '/user':\n                this.section.scrollTo(0, nextState.scroll.user);\n        }\n\n        return true;\n    }\n\n    init = () => {\n        this.setState({\n            autoHeight: window.innerHeight - 60\n        },() => {\n            store.dispatch(countAvailableClientHeightAction({\n                width: window.innerWidth,\n                height: window.innerHeight - 120\n            }));\n        });\n    }\n\n    componentDidMount() {\n        const _this = this;\n        \n        this.setState({\n            autoHeight: window.innerHeight - 60\n        },() => {\n            store.dispatch(countAvailableClientHeightAction({\n                width: window.innerWidth,\n                height: window.innerHeight - 120\n            }));\n        });\n\n        /* 自动设置全局导航和全局内容区块的高度和位置 */\n        window.addEventListener('resize', (e) => {\n            this.setState({\n                autoHeight: window.innerHeight - 60\n            },() => {\n                store.dispatch(countAvailableClientHeightAction({\n                    width: window.innerWidth,\n                    height: window.innerHeight - 120\n                }));\n            });\n        });\n\n        /* 设置页面的实时高度 */\n        this.section.addEventListener('scroll', () => {\n\n            let top = _this.section.scrollTop;\n            const newState = JSON.parse(JSON.stringify(this.state));\n\n            switch(_this.state.page){\n                case '/app':\n                    newState.scroll.app = top;\n                    break;\n                case '/category':\n                    newState.scroll.category = top;\n                    break;\n                case '/news':\n                    newState.scroll.news = top;\n                    break;\n                case '/user':\n                    newState.scroll.user = top;\n            }\n\n            this.setState(newState)\n        });\n    }\n\n    handleChangePage = (page) => {\n        this.setState({\n            page\n        })\n    }\n\n    render() {\n        return(\n            <>\n                <section id=\"layout-container\">\n                    <section id=\"layout-content-container\" ref={section => this.section = section}>\n\n                        <App display={this.state.page === '/app' ?  true: false} />\n                        <Category display={this.state.page === '/category' ?  true: false} />\n                        <News display={this.state.page === '/news' ?  true: false} />\n                        <User display={this.state.page === '/user' ?  true: false} />\n\n                        <style jsx>\n                            {`\n                              #layout-content-container{\n                                width: 100%;\n                                height: ${this.state.autoHeight}px;\n                              }\n                            `}\n                        </style>\n                    </section>\n\n                    <footer id=\"layout-navigation-container\">\n                        {\n                            menuList.map((menu, index) => (\n                                <a\n                                    className={`\n                                        layout-navigation-item \n                                        ${(menu.href.includes(this.state.page) ? 'active': '')}\n                                    `}\n                                    key={menu.href}\n                                    onClick={() => this.handleChangePage(menu.href)}\n                                >\n                                    <i className={`iconfont ${menu.icon} layout-navigation-icon`}></i>\n                                    <span>{menu.name}</span>\n                                </a>\n                            ))\n                        }\n                    </footer>\n                </section>\n            </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}