{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport store from \"../../redux/store\";\nimport { platVideoStatusAction, playVideoInfoAction } from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport { convertTime } from \"../../utils/utils\";\nimport '../../styles/videoPlayer.css';\n\nfunction Video(props) {\n  _s();\n\n  var flvPlayer = null;\n\n  var _useState = useState(store.getState().videoInfo.url),\n      url = _useState[0],\n      setUrl = _useState[1];\n\n  var _useState2 = useState(0),\n      duration = _useState2[0],\n      setDuration = _useState2[1];\n\n  var _useState3 = useState(),\n      container = _useState3[0],\n      setContainer = _useState3[1];\n\n  useEffect(function () {\n    if (container) {\n      setContainer(document.getElementById(\"playerContainer\"));\n      console.log(container);\n    }\n  }, [container]); // useEffect(() => {\n  //\n  // }, [container]);\n  // useEffect(() => {\n  //     store.subscribe(() => {\n  //         if(JSON.stringify(store.getState().videoInfo.url) !== '{}'){\n  //             const temp = store.getState().videoInfo.url.durl[0].url;\n  //             setUrl(temp);\n  //         }\n  //     })\n  // }, [store.getState().videoInfo.url]);\n  //\n  // useEffect(() => {\n  //     if(flvjs.isSupported()){\n  //         flvPlayer = new Player({url: url}, \"playerContainer\");\n  //     }\n  // })\n  //\n  // useEffect(() => {\n  //     if(!status){\n  //         flvPlayer.destroy();\n  //     }\n  // }, [props.status])\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: 640,\n      height: 480,\n      border: '1px solid #000'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"video\", {\n      id: \"playerContainer\",\n      width: \"640px\",\n      height: \"480px\",\n      controls: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\n\n_s(Video, \"B9ODE+S+MJ2rcHDE60RKe2fnWVg=\");\n\n_c = Video;\nexport default function VideoDetail(props) {\n  _s2();\n\n  var _useState4 = useState(store.getState().playVideoStatus),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  useEffect(function () {\n    store.subscribe(function () {\n      setStatus(store.getState().playVideoStatus);\n    });\n  }, [store.getState().playVideoStatus]);\n\n  function exitVideo() {\n    store.dispatch(platVideoStatusAction(false));\n    store.dispatch(playVideoInfoAction({\n      url: {},\n      info: {}\n    }));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: '10000',\n      backgroundColor: 'lightpink',\n      display: status ? 'block' : 'none'\n    },\n    children: [status && /*#__PURE__*/_jsxDEV(Video, {\n      status: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick() {\n        return exitVideo();\n      },\n      children: \"cancel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(VideoDetail, \"1IV1QrlNWNfANAKMe6lxWYK5QPg=\");\n\n_c2 = VideoDetail;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Video\");\n$RefreshReg$(_c2, \"VideoDetail\");","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx"],"names":["useEffect","useRef","useState","store","platVideoStatusAction","playVideoInfoAction","Player","convertTime","Video","props","flvPlayer","getState","videoInfo","url","setUrl","duration","setDuration","container","setContainer","document","getElementById","console","log","width","height","border","VideoDetail","playVideoStatus","status","setStatus","subscribe","exitVideo","dispatch","info","position","top","left","right","bottom","zIndex","backgroundColor","display"],"mappings":"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","sourcesContent":["import {useEffect, useRef, useState} from \"react\";\nimport store from \"../../redux/store\";\nimport {platVideoStatusAction, playVideoInfoAction} from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport {convertTime} from \"../../utils/utils\";\nimport '../../styles/videoPlayer.css';\n\n\nfunction Video(props){\n    let flvPlayer = null;\n    const [url, setUrl] = useState(store.getState().videoInfo.url);\n    const [duration, setDuration] = useState(0);\n    const [container, setContainer] = useState();\n\n    useEffect(() => {\n        if(container){\n            setContainer(document.getElementById(\"playerContainer\"));\n            console.log(container);\n        }\n    }, [container]);\n\n    // useEffect(() => {\n    //\n    // }, [container]);\n\n    // useEffect(() => {\n    //     store.subscribe(() => {\n    //         if(JSON.stringify(store.getState().videoInfo.url) !== '{}'){\n    //             const temp = store.getState().videoInfo.url.durl[0].url;\n    //             setUrl(temp);\n    //         }\n    //     })\n    // }, [store.getState().videoInfo.url]);\n    //\n    // useEffect(() => {\n    //     if(flvjs.isSupported()){\n    //         flvPlayer = new Player({url: url}, \"playerContainer\");\n    //     }\n    // })\n    //\n    // useEffect(() => {\n    //     if(!status){\n    //         flvPlayer.destroy();\n    //     }\n    // }, [props.status])\n\n\n\n    return(\n        <div style={{width:640, height:480, border: '1px solid #000'}}>\n            <video id='playerContainer' width='640px' height='480px' controls={true} />\n            {/*<button onClick={() => flvPlayer.play()}>play</button>*/}\n            {/*<button onClick={() => flvPlayer.pause()}>pause</button>*/}\n            {/*<button onClick={() => flvPlayer.destroy()}>destroy</button>*/}\n            {/*<button onClick={() => flvPlayer.setCurrentTime(10)}>加10秒</button>*/}\n            {/*<button onClick={() => flvPlayer.muteSwitch()}>静音</button>*/}\n            {/*<button onClick={() => {console.log(flvPlayer.getDuration())}}>获取播放长度</button>*/}\n            {/*<button onClick={() => flvPlayer.setPlaySpeed(2)}>2x速度</button>*/}\n            {/*<button onClick={() => flvPlayer.replayVideo()}>重新播放</button><br/><br/>*/}\n\n            {/*<div className=\"progress-bar-wrapper\">*/}\n            {/*    <input type=\"range\" min=\"0\" max=\"100\" className=\"progress-bar\"/>*/}\n            {/*</div>*/}\n        </div>\n    )\n}\n\n\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\nexport default function VideoDetail(props){\n\n    const [status, setStatus] = useState(store.getState().playVideoStatus);\n\n    useEffect(() => {\n        store.subscribe(() => {\n            setStatus(store.getState().playVideoStatus);\n        })\n    }, [store.getState().playVideoStatus]);\n\n\n    function exitVideo(){\n        store.dispatch(platVideoStatusAction(false));\n        store.dispatch(playVideoInfoAction({\n            url: {},\n            info: {}\n        }));\n    }\n\n    return(\n        <section style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: '10000',\n            backgroundColor: 'lightpink',\n            display: (status ? 'block': 'none')\n        }}>\n            {\n                status && <Video status={status} />\n            }\n            <br/><br/><br/><br/>\n            <button onClick={() => exitVideo()}>cancel</button>\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}