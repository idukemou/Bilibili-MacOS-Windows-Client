{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _classCallCheck from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport '../../styles/layout.css';\nimport App from \"../homePage/app\";\nimport Category from \"../categoryPage/category\";\nimport News from \"../newsPage/news\";\nimport User from \"../userPage/user\";\nvar menuList = [{\n  name: '首页',\n  href: '/app',\n  icon: 'icon-shouye'\n}, {\n  name: '分区',\n  href: '/category',\n  icon: 'icon-category'\n}, {\n  name: '动态',\n  href: '/news',\n  icon: 'icon-dongtai'\n}, {\n  name: '我的',\n  href: '/user',\n  icon: 'icon-bilibili-line'\n}];\n\nvar Layout = /*#__PURE__*/function (_React$Component) {\n  _inherits(Layout, _React$Component);\n\n  var _super = _createSuper(Layout);\n\n  function Layout(props) {\n    var _this2;\n\n    _classCallCheck(this, Layout);\n\n    _this2 = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this2), \"handleChangePage\", function (page) {\n      _this2.setState({\n        page: page\n      });\n    });\n\n    _this2.state = {\n      page: '/app',\n      autoHeight: 0,\n      scroll: {\n        app: 0,\n        category: 0,\n        news: 0,\n        user: 0\n      }\n    };\n    return _this2;\n  }\n\n  _createClass(Layout, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState, nextContext) {\n      switch (nextState.page) {\n        case '/app':\n          this.section.scrollTo(0, nextState.scroll.app);\n          break;\n\n        case '/category':\n          this.section.scrollTo(0, nextState.scroll.category);\n          break;\n\n        case '/news':\n          this.section.scrollTo(0, nextState.scroll.news);\n          break;\n\n        case '/user':\n          this.section.scrollTo(0, nextState.scroll.user);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var _this = this;\n      /* 自动设置全局导航和全局内容区块的高度和位置 */\n\n\n      this.setState({\n        autoHeight: window.innerHeight - 60\n      });\n      window.addEventListener('resize', function (e) {\n        _this.setState({\n          autoHeight: window.innerHeight - 60\n        });\n      });\n      /* 设置页面的实时高度 */\n\n      this.section.addEventListener('scroll', function () {\n        var top = _this.section.scrollTop;\n        var newState = JSON.parse(JSON.stringify(_this3.state));\n\n        switch (_this.state.page) {\n          case '/app':\n            newState.scroll.app = top;\n            break;\n\n          case '/category':\n            newState.scroll.category = top;\n            break;\n\n          case '/news':\n            newState.scroll.news = top;\n            break;\n\n          case '/user':\n            newState.scroll.user = top;\n        }\n\n        _this3.setState(newState);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(\"section\", {\n          id: \"layout-container\",\n          children: [/*#__PURE__*/_jsxs(\"section\", {\n            id: \"layout-content-container\",\n            ref: function ref(section) {\n              return _this4.section = section;\n            },\n            className: _JSXStyle.dynamic([[\"4184239453\", [this.state.autoHeight]]]),\n            children: [/*#__PURE__*/_jsx(App, {\n              display: this.state.page === '/app' ? true : false\n            }), /*#__PURE__*/_jsx(Category, {\n              display: this.state.page === '/category' ? true : false\n            }), /*#__PURE__*/_jsx(News, {\n              display: this.state.page === '/news' ? true : false\n            }), /*#__PURE__*/_jsx(User, {\n              display: this.state.page === '/user' ? true : false\n            }), /*#__PURE__*/_jsx(_JSXStyle, {\n              id: \"4184239453\",\n              dynamic: [this.state.autoHeight],\n              children: [\"#layout-content-container.__jsx-style-dynamic-selector{width:100%;height:\".concat(this.state.autoHeight, \"px;}\")]\n            })]\n          }), /*#__PURE__*/_jsx(\"footer\", {\n            id: \"layout-navigation-container\",\n            children: menuList.map(function (menu, index) {\n              return /*#__PURE__*/_jsxs(\"a\", {\n                className: \"\\n                                        layout-navigation-item \\n                                        \".concat(menu.href.includes(_this4.state.page) ? 'active' : '', \"\\n                                    \"),\n                onClick: function onClick() {\n                  return _this4.handleChangePage(menu.href);\n                },\n                children: [/*#__PURE__*/_jsx(\"i\", {\n                  className: \"iconfont \".concat(menu.icon, \" layout-navigation-icon\")\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  children: menu.name\n                })]\n              }, menu.href);\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return Layout;\n}(React.Component);\n\nexport { Layout as default };","map":null,"metadata":{},"sourceType":"module"}