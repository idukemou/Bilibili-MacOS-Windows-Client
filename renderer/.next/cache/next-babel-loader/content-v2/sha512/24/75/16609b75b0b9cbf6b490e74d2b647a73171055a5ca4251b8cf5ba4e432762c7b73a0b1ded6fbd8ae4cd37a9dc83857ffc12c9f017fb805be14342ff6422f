{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx\";\nimport { useEffect, useState, use } from \"react\";\nimport store from \"../../redux/store\";\nimport { platVideoStatusAction, playVideoInfoAction } from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport { convertDuration, convertTime } from \"../../utils/utils\";\nimport '../../styles/videoPlayer.css';\n\nfunction Video(props) {\n  const {\n    0: flvPlayer,\n    1: setFlvPlayer\n  } = useState(null);\n  const {\n    0: url,\n    1: setUrl\n  } = useState(store.getState().videoInfo.url);\n  useEffect(() => {\n    let unsubscribe = store.subscribe(() => {\n      if (JSON.stringify(store.getState().videoInfo.url) !== '{}') {\n        setUrl(store.getState().videoInfo.url.durl[0].url);\n        unsubscribe();\n      }\n    });\n\n    if (flvjs.isSupported() && url.length > 10) {\n      setFlvPlayer(new Player({\n        url: url\n      }, \"playerContainer\"));\n    }\n  }, [url]);\n\n  (() => {\n    setInterval(() => {\n      if (flvPlayer !== null) {\n        console.log(convertDuration(flvPlayer.getCurrentTime()) + \"/\" + convertTime(flvPlayer.getDuration()));\n      }\n    }, 1000);\n  })();\n\n  function quit() {\n    flvPlayer.destroy();\n    props.quit();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: 640,\n      height: 480,\n      border: '1px solid #000'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      id: \"playerContainer\",\n      width: \"640px\",\n      height: \"480px\",\n      controls: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.play(),\n      children: \"play\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.pause(),\n      children: \"pause\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.destroy(),\n      children: \"destroy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.setCurrentTime(10),\n      children: \"\\u52A010\\u79D2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.muteSwitch(),\n      children: \"\\u9759\\u97F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        console.log(flvPlayer.getDuration());\n      },\n      children: \"\\u83B7\\u53D6\\u64AD\\u653E\\u957F\\u5EA6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.setPlaySpeed(2),\n      children: \"2x\\u901F\\u5EA6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => flvPlayer.replayVideo(),\n      children: \"\\u91CD\\u65B0\\u64AD\\u653E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 74\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 79\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => quit(),\n      children: \"\\u9000\\u51FA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-bar-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"range\",\n        min: \"0\",\n        max: \"100\",\n        className: \"progress-bar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\n\n\nexport default function VideoDetail(props) {\n  const {\n    0: status,\n    1: setStatus\n  } = useState(store.getState().playVideoStatus);\n  useEffect(() => {\n    store.subscribe(() => {\n      setStatus(store.getState().playVideoStatus);\n    });\n  }, [store.getState().playVideoStatus]);\n\n  function exitVideo() {\n    store.dispatch(platVideoStatusAction(false));\n    store.dispatch(playVideoInfoAction({\n      url: {},\n      info: {}\n    }));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: '10000',\n      backgroundColor: 'lightpink',\n      display: status ? 'block' : 'none'\n    },\n    children: [status && /*#__PURE__*/_jsxDEV(Video, {\n      status: status,\n      quit: exitVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/renderer/components/common/videoDetail.jsx"],"names":["useEffect","useState","use","store","platVideoStatusAction","playVideoInfoAction","Player","convertDuration","convertTime","Video","props","flvPlayer","setFlvPlayer","url","setUrl","getState","videoInfo","unsubscribe","subscribe","JSON","stringify","durl","flvjs","isSupported","length","setInterval","console","log","getCurrentTime","getDuration","quit","destroy","width","height","border","play","pause","setCurrentTime","muteSwitch","setPlaySpeed","replayVideo","VideoDetail","status","setStatus","playVideoStatus","exitVideo","dispatch","info","position","top","left","right","bottom","zIndex","backgroundColor","display"],"mappings":"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","sourcesContent":["import {useEffect, useState, use} from \"react\";\nimport store from \"../../redux/store\";\nimport {platVideoStatusAction, playVideoInfoAction} from \"../../redux/actionCreators\";\nimport Player from \"../../utils/Player\";\nimport {convertDuration, convertTime} from \"../../utils/utils\";\nimport '../../styles/videoPlayer.css';\n\n\nfunction Video(props){\n    const [flvPlayer, setFlvPlayer] = useState(null);\n    const [url, setUrl] = useState(store.getState().videoInfo.url);\n\n    useEffect(() => {\n        let unsubscribe = store.subscribe(() => {\n            if(JSON.stringify(store.getState().videoInfo.url) !== '{}'){\n                setUrl(store.getState().videoInfo.url.durl[0].url);\n                unsubscribe();\n            }\n        })\n\n        if(flvjs.isSupported() && url.length > 10){\n            setFlvPlayer(new Player({url: url}, \"playerContainer\"));\n        }\n    }, [url]);\n\n    (() => {\n        setInterval(() => {\n            if(flvPlayer !== null){\n                console.log(convertDuration(flvPlayer.getCurrentTime())+\"/\"+convertTime(flvPlayer.getDuration()));\n            }\n        }, 1000);\n    })();\n\n\n\n    function quit(){\n        flvPlayer.destroy();\n        props.quit();\n    }\n\n\n\n\n\n    return(\n        <div style={{width:640, height:480, border: '1px solid #000'}}>\n            <video id='playerContainer' width='640px' height='480px' controls={true} />\n            <button onClick={() => flvPlayer.play()}>play</button>\n            <button onClick={() => flvPlayer.pause()}>pause</button>\n            <button onClick={() => flvPlayer.destroy()}>destroy</button>\n            <button onClick={() => flvPlayer.setCurrentTime(10)}>加10秒</button>\n            <button onClick={() => flvPlayer.muteSwitch()}>静音</button>\n            <button onClick={() => {console.log(flvPlayer.getDuration())}}>获取播放长度</button>\n            <button onClick={() => flvPlayer.setPlaySpeed(2)}>2x速度</button>\n            <button onClick={() => flvPlayer.replayVideo()}>重新播放</button><br/><br/>\n            <button onClick={() => quit()}>退出</button>\n\n            <div className=\"progress-bar-wrapper\">\n                <input type=\"range\" min=\"0\" max=\"100\" className=\"progress-bar\"/>\n            </div>\n\n        </div>\n    )\n}\n\n\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @constructor\n */\nexport default function VideoDetail(props){\n\n    const [status, setStatus] = useState(store.getState().playVideoStatus);\n\n    useEffect(() => {\n        store.subscribe(() => {\n            setStatus(store.getState().playVideoStatus);\n        })\n    }, [store.getState().playVideoStatus]);\n\n\n    function exitVideo(){\n        store.dispatch(platVideoStatusAction(false));\n        store.dispatch(playVideoInfoAction({\n            url: {},\n            info: {}\n        }));\n    }\n\n    return(\n        <section style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: '10000',\n            backgroundColor: 'lightpink',\n            display: (status ? 'block': 'none')\n        }}>\n            {\n                status && <Video status={status} quit={exitVideo} />\n            }\n            <br/><br/><br/><br/>\n        </section>\n    )\n}"]},"metadata":{},"sourceType":"module"}