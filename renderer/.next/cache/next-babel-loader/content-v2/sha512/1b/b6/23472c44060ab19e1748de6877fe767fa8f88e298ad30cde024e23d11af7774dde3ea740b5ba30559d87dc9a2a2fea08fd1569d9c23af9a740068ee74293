{"ast":null,"code":"import _defineProperty from \"/Users/yuxuan/Desktop/Bilibili-MacOS-Windows-Client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport store from \"../../redux/store\";\nexport default function ContentFrame(props) {\n  var _useState = useState(store.getState().availableSize),\n      availableSize = _useState[0],\n      setAvailableSize = _useState[1];\n\n  useEffect(function () {\n    store.subscribe(function () {\n      return setAvailableSize(store.getState().availableSize);\n    });\n  }, [store.getState().availableSize.width, store.getState().availableSize.height]);\n  return /*#__PURE__*/_jsx(\"section\", {\n    style: {\n      width: \"\".concat(props.children.length * 100, \"%\"),\n      height: \"\".concat(availableSize.height, \"px\"),\n      overflow: 'hidden',\n      position: 'absolute',\n      transition: 'left 0.3s',\n      left: \"\".concat(props.activeIndex * -availableSize.width, \"px\")\n    },\n    children: props.children\n  });\n}\nexport function Content(props) {\n  var ref = useRef(null);\n\n  var _useState2 = useState(store.getState().availableSize),\n      availableSize = _useState2[0],\n      setAvailableSize = _useState2[1];\n\n  var _useState3 = useState(0),\n      scrollHeight = _useState3[0],\n      setScrollHeight = _useState3[1];\n\n  var _useState4 = useState(0),\n      scrollTop = _useState4[0],\n      setScrollTop = _useState4[1];\n\n  var _useState5 = useState(0),\n      clientHeight = _useState5[0],\n      setClientHeight = _useState5[1];\n\n  var _useState6 = useState(false),\n      reachEnd = _useState6[0],\n      setReachEnd = _useState6[1];\n\n  useEffect(function () {\n    store.subscribe(function () {\n      return setAvailableSize(store.getState().availableSize);\n    });\n  }, [store.getState().availableSize.width, store.getState().availableSize.height]);\n  useEffect(function () {\n    setClientHeight(ref.current.clientHeight);\n  }, [store.getState().availableSize]);\n  useEffect(function () {\n    ref.current.addEventListener('scroll', function () {\n      setScrollTop(ref.current.scrollTop);\n      setScrollHeight(ref.current.scrollHeight);\n\n      if (ref.current.scrollHeight - availableSize.height === ref.current.scrollTop) {\n        setReachEnd(true);\n      } else {\n        setReachEnd(false);\n      }\n    }, false);\n  });\n  return /*#__PURE__*/_jsx(\"section\", {\n    style: {\n      width: availableSize.width + 'px',\n      height: availableSize.height + 'px',\n      \"float\": \"left\",\n      overflow: 'hidden',\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      alignContent: 'flex-start'\n    },\n    children: /*#__PURE__*/_jsx(\"section\", {\n      ref: ref,\n      className: \"recommend-item-wrapper\",\n      style: {\n        width: availableSize.width + 'px',\n        height: availableSize.height + 'px'\n      },\n      children: React.Children.map(props.children, function (child) {\n        if (! /*#__PURE__*/React.isValidElement(child)) {\n          return null;\n        }\n\n        var childProps = _objectSpread(_objectSpread({}, child.props), {}, {\n          loading: reachEnd,\n          clientData: {\n            scrollTop: scrollTop,\n            clientHeight: clientHeight\n          }\n        });\n\n        return /*#__PURE__*/React.cloneElement(child, childProps);\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}